System.register([], function(_export, _context) { return { execute: function () {
System.register("chunks:///_virtual/AbortController.js",["./cjs-loader.mjs"],(function(t,e){"use strict";var r;return{setters:[function(t){r=t.default}],execute:function(){function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var n=t("__cjsMetaURL",e.meta.url);r.define(n,(function(t,e,r,n,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AbortController=void 0;var s=function(){function t(){this._isAborted=!1,this.onabort=null}var e,r,n;return t.prototype.abort=function(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())},e=t,(r=[{key:"signal",get:function(){return this}},{key:"aborted",get:function(){return this._isAborted}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.AbortController=s,r.exports,r.exports.__esModule,r.exports.AbortController}),{})}}}));

System.register("chunks:///_virtual/AccessTokenHttpClient.js",["./cjs-loader.mjs","./HeaderNames.js","./HttpClient.js"],(function(t,e){"use strict";var r,n,o;return{setters:[function(t){r=t.default},function(t){n=t.__cjsMetaURL},function(t){o=t.__cjsMetaURL}],execute:function(){function i(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
i=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function h(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new E(o||[]);return n(a,"_invoke",{value:b(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=h;var l={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==e&&r.call(m,a)&&(y=m);var w=v.prototype=p.prototype=Object.create(y);function _(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function o(n,i,a,c){var u=f(t[n],t,i);if("throw"!==u.type){var s=u.arg,h=s.value;return h&&"object"==typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(h).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function b(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=L(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function L(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,L(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=f(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function O(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},_(x.prototype),s(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(h(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function a(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var u=t("__cjsMetaURL",e.meta.url);r.define(u,(function(t,e,r,n,o){Object.defineProperty(t,"__esModule",{value:!0}),t.AccessTokenHttpClient=void 0;var u=e("./HeaderNames"),s=function(t){var e,r;function n(e,r){var n;return(n=t.call(this)||this)._innerClient=e,n._accessTokenFactory=r,n}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,c(e,r);var o=n.prototype;return o.send=function(){var t,e=(t=i().mark((function t(e){var r,n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=!0,!this._accessTokenFactory||this._accessToken&&!(e.url&&e.url.indexOf("/negotiate?")>0)){t.next=6;break}return r=!1,t.next=5,this._accessTokenFactory();case 5:this._accessToken=t.sent;case 6:return this._setAuthorizationHeader(e),t.next=9,this._innerClient.send(e);case 9:if(n=t.sent,!r||401!==n.statusCode||!this._accessTokenFactory){t.next=18;break}return t.next=13,this._accessTokenFactory();case 13:return this._accessToken=t.sent,this._setAuthorizationHeader(e),t.next=17,this._innerClient.send(e);case 17:return t.abrupt("return",t.sent);case 18:return t.abrupt("return",n);case 19:case"end":return t.stop()}}),t,this)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function c(t){a(i,n,o,c,u,"next",t)}function u(t){a(i,n,o,c,u,"throw",t)}c(void 0)}))});return function(t){return e.apply(this,arguments)}}(),o._setAuthorizationHeader=function(t){t.headers||(t.headers={}),this._accessToken?t.headers[u.HeaderNames.Authorization]="Bearer "+this._accessToken:this._accessTokenFactory&&t.headers[u.HeaderNames.Authorization]&&delete t.headers[u.HeaderNames.Authorization]},o.getCookieString=function(t){return this._innerClient.getCookieString(t)},n}(e("./HttpClient").HttpClient);t.AccessTokenHttpClient=s,r.exports,r.exports.__esModule,r.exports.AccessTokenHttpClient}),(function(){return{"./HeaderNames":n,"./HttpClient":o}}))}}}));

System.register("chunks:///_virtual/cjs-loader.mjs",[],(function(e){"use strict";return{execute:function(){e("default",new(function(){function e(){this._registry={},this._moduleCache={}}var r=e.prototype;return r.define=function(e,r,t){this._registry[e]={factory:r,resolveMap:t}},r.require=function(e){return this._require(e)},r.throwInvalidWrapper=function(e,r){throw new Error("Module '"+e+"' imported from '"+r+"' is expected be an ESM-wrapped CommonJS module but it doesn't.")},r._require=function(e,r){var t=this._moduleCache[e];if(t)return t.exports;var o={id:e,exports:{}};return this._moduleCache[e]=o,this._tryModuleLoad(o,e),o.exports},r._resolve=function(e,r){return this._resolveFromInfos(e,r)||this._throwUnresolved(e,r)},r._resolveFromInfos=function(e,r){var t,o;return e in cjsInfos?e:r&&null!=(t=null==(o=cjsInfos[r])?void 0:o.resolveCache[e])?t:void 0},r._tryModuleLoad=function(e,r){var t=!0;try{this._load(e,r),t=!1}finally{t&&delete this._moduleCache[r]}},r._load=function(e,r){var t=this._loadWrapper(r),o=t.factory,n=t.resolveMap,i=this._createRequire(e),u=n?this._createRequireWithResolveMap("function"==typeof n?n():n,i):i;o(e.exports,u,e)},r._loadWrapper=function(e){return e in this._registry?this._registry[e]:this._loadHostProvidedModules(e)},r._loadHostProvidedModules=function(e){return{factory:function(r,t,o){if("undefined"==typeof require)throw new Error("Current environment does not provide a require() for requiring '"+e+"'.");try{o.exports=require(e)}catch(r){throw new Error("Exception thrown when calling host defined require('"+e+"').",{cause:r})}}}},r._createRequire=function(e){var r=this;return function(t){return r._require(t,e)}},r._createRequireWithResolveMap=function(e,r){return function(t){var o=e[t];if(o)return r(o);throw new Error("Unresolved specifier "+t)}},r._throwUnresolved=function(e,r){throw new Error("Unable to resolve "+e+" from "+parent+".")},e}()))}}}));

System.register("chunks:///_virtual/colyseus.js",["./cjs-loader.mjs"],(function(e,t){"use strict";var n;return{setters:[function(e){n=e.default}],execute:function(){e("default",void 0);var i=e("__cjsMetaURL",t.meta.url);n.define(i,(function(t,n,i,r,o){!function(e,n){"object"==typeof t&&void 0!==i?n(t):"function"==typeof define&&define.amd?define("colyseus.js",["exports"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).Colyseus={})}(this,(function(e){ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return null!==e&&"object"==typeof e&&e.buffer instanceof ArrayBuffer}),"undefined"==typeof globalThis&&"undefined"!=typeof window&&(window.globalThis=window)
/*! *****************************************************************************
          Copyright (c) Microsoft Corporation.
           Permission to use, copy, modify, and/or distribute this software for any
          purpose with or without fee is hereby granted.
           THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
          REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
          AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
          INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
          LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
          OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
          PERFORMANCE OF THIS SOFTWARE.
          ***************************************************************************** */;var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,n)};function n(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}function i(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{f(i.next(e))}catch(e){o(e)}}function a(e){try{f(i.throw(e))}catch(e){o(e)}}function f(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}f((i=i.apply(e,t||[])).next())}))}function r(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function o(e,t){t.headers=e.headers||{},t.statusMessage=e.statusText,t.statusCode=e.status,t.data=e.response}function s(e,t,n){return new Promise((function(i,r){n=n||{};var s,a,f,h=new XMLHttpRequest,c=n.body,u=n.headers||{};for(s in n.timeout&&(h.timeout=n.timeout),h.ontimeout=h.onerror=function(e){e.timeout="timeout"==e.type,r(e)},h.open(e,t.href||t),h.onload=function(){for(f=h.getAllResponseHeaders().trim().split(/[\r\n]+/),o(h,h);a=f.shift();)a=a.split(": "),h.headers[a.shift().toLowerCase()]=a.join(": ");if((a=h.headers["content-type"])&&~a.indexOf("application/json"))try{h.data=JSON.parse(h.data,n.reviver)}catch(e){return o(h,e),r(e)}(h.status>=400?r:i)(h)},typeof FormData<"u"&&c instanceof FormData||c&&"object"==typeof c&&(u["content-type"]="application/json",c=JSON.stringify(c)),h.withCredentials=!!n.withCredentials,u)h.setRequestHeader(s,u[s]);h.send(c)}))}var a=s.bind(s,"GET"),f=s.bind(s,"POST"),h=s.bind(s,"PATCH"),c=s.bind(s,"DELETE"),u=a,d=h,p=f,l=s.bind(s,"PUT"),v=s,y={del:c,get:u,patch:d,post:p,put:l,send:v},g=Object.freeze(Object.assign(Object.create(null),y,{default:y,del:c,get:u,patch:d,post:p,put:l,send:v})),m=function(e){function t(t,n){var i=e.call(this,n)||this;return i.name="ServerError",i.code=t,i}return n(t,e),t}(Error);function _(e,t){if(this._offset=t,e instanceof ArrayBuffer)this._buffer=e,this._view=new DataView(this._buffer);else{if(!ArrayBuffer.isView(e))throw new Error("Invalid argument");this._buffer=e.buffer,this._view=new DataView(this._buffer,e.byteOffset,e.byteLength)}}function w(e,t,n){for(var i=0,r=0,o=n.length;r<o;r++)(i=n.charCodeAt(r))<128?e.setUint8(t++,i):i<2048?(e.setUint8(t++,192|i>>6),e.setUint8(t++,128|63&i)):i<55296||i>=57344?(e.setUint8(t++,224|i>>12),e.setUint8(t++,128|i>>6&63),e.setUint8(t++,128|63&i)):(r++,i=65536+((1023&i)<<10|1023&n.charCodeAt(r)),e.setUint8(t++,240|i>>18),e.setUint8(t++,128|i>>12&63),e.setUint8(t++,128|i>>6&63),e.setUint8(t++,128|63&i))}function A(e,t,n){var i=typeof n,r=0,o=0,s=0,a=0,f=0,h=0;if("string"===i){if((f=function(e){for(var t=0,n=0,i=0,r=e.length;i<r;i++)(t=e.charCodeAt(i))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(i++,n+=4);return n}(n))<32)e.push(160|f),h=1;else if(f<256)e.push(217,f),h=2;else if(f<65536)e.push(218,f>>8,f),h=3;else{if(!(f<4294967296))throw new Error("String too long");e.push(219,f>>24,f>>16,f>>8,f),h=5}return t.push({_str:n,_length:f,_offset:e.length}),h+f}if("number"===i)return Math.floor(n)===n&&isFinite(n)?n>=0?n<128?(e.push(n),1):n<256?(e.push(204,n),2):n<65536?(e.push(205,n>>8,n),3):n<4294967296?(e.push(206,n>>24,n>>16,n>>8,n),5):(s=n/Math.pow(2,32)>>0,a=n>>>0,e.push(207,s>>24,s>>16,s>>8,s,a>>24,a>>16,a>>8,a),9):n>=-32?(e.push(n),1):n>=-128?(e.push(208,n),2):n>=-32768?(e.push(209,n>>8,n),3):n>=-2147483648?(e.push(210,n>>24,n>>16,n>>8,n),5):(s=Math.floor(n/Math.pow(2,32)),a=n>>>0,e.push(211,s>>24,s>>16,s>>8,s,a>>24,a>>16,a>>8,a),9):(e.push(203),t.push({_float:n,_length:8,_offset:e.length}),9);if("object"===i){if(null===n)return e.push(192),1;if(Array.isArray(n)){if((f=n.length)<16)e.push(144|f),h=1;else if(f<65536)e.push(220,f>>8,f),h=3;else{if(!(f<4294967296))throw new Error("Array too large");e.push(221,f>>24,f>>16,f>>8,f),h=5}for(r=0;r<f;r++)h+=A(e,t,n[r]);return h}if(n instanceof Date){var c=n.getTime();return s=Math.floor(c/Math.pow(2,32)),a=c>>>0,e.push(215,0,s>>24,s>>16,s>>8,s,a>>24,a>>16,a>>8,a),10}if(n instanceof ArrayBuffer){if((f=n.byteLength)<256)e.push(196,f),h=2;else if(f<65536)e.push(197,f>>8,f),h=3;else{if(!(f<4294967296))throw new Error("Buffer too large");e.push(198,f>>24,f>>16,f>>8,f),h=5}return t.push({_bin:n,_length:f,_offset:e.length}),h+f}if("function"==typeof n.toJSON)return A(e,t,n.toJSON());var u=[],d="",p=Object.keys(n);for(r=0,o=p.length;r<o;r++)"function"!=typeof n[d=p[r]]&&u.push(d);if((f=u.length)<16)e.push(128|f),h=1;else if(f<65536)e.push(222,f>>8,f),h=3;else{if(!(f<4294967296))throw new Error("Object too large");e.push(223,f>>24,f>>16,f>>8,f),h=5}for(r=0;r<f;r++)h+=A(e,t,d=u[r]),h+=A(e,t,n[d]);return h}if("boolean"===i)return e.push(n?195:194),1;if("undefined"===i)return e.push(212,0,0),3;throw new Error("Could not encode")}function $(e){var t=[],n=[],i=A(t,n,e),r=new ArrayBuffer(i),o=new DataView(r),s=0,a=0,f=-1;n.length>0&&(f=n[0]._offset);for(var h,c=0,u=0,d=0,p=t.length;d<p;d++)if(o.setUint8(a+d,t[d]),d+1===f){if(c=(h=n[s])._length,u=a+f,h._bin)for(var l=new Uint8Array(h._bin),v=0;v<c;v++)o.setUint8(u+v,l[v]);else h._str?w(o,u,h._str):void 0!==h._float&&o.setFloat64(u,h._float);a+=c,n[++s]&&(f=n[s]._offset)}return r}_.prototype._array=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=this._parse();return t},_.prototype._map=function(e){for(var t={},n=0;n<e;n++)t[this._parse()]=this._parse();return t},_.prototype._str=function(e){var t=function(e,t,n){for(var i="",r=0,o=t,s=t+n;o<s;o++){var a=e.getUint8(o);if(0!=(128&a))if(192!=(224&a))if(224!=(240&a)){if(240!=(248&a))throw new Error("Invalid byte "+a.toString(16));(r=(7&a)<<18|(63&e.getUint8(++o))<<12|(63&e.getUint8(++o))<<6|(63&e.getUint8(++o))<<0)>=65536?(r-=65536,i+=String.fromCharCode(55296+(r>>>10),56320+(1023&r))):i+=String.fromCharCode(r)}else i+=String.fromCharCode((15&a)<<12|(63&e.getUint8(++o))<<6|(63&e.getUint8(++o))<<0);else i+=String.fromCharCode((31&a)<<6|63&e.getUint8(++o));else i+=String.fromCharCode(a)}return i}(this._view,this._offset,e);return this._offset+=e,t},_.prototype._bin=function(e){var t=this._buffer.slice(this._offset,this._offset+e);return this._offset+=e,t},_.prototype._parse=function(){var e,t=this._view.getUint8(this._offset++),n=0,i=0,r=0,o=0;if(t<192)return t<128?t:t<144?this._map(15&t):t<160?this._array(15&t):this._str(31&t);if(t>223)return-1*(255-t+1);switch(t){case 192:return null;case 194:return!1;case 195:return!0;case 196:return n=this._view.getUint8(this._offset),this._offset+=1,this._bin(n);case 197:return n=this._view.getUint16(this._offset),this._offset+=2,this._bin(n);case 198:return n=this._view.getUint32(this._offset),this._offset+=4,this._bin(n);case 199:return n=this._view.getUint8(this._offset),i=this._view.getInt8(this._offset+1),this._offset+=2,[i,this._bin(n)];case 200:return n=this._view.getUint16(this._offset),i=this._view.getInt8(this._offset+2),this._offset+=3,[i,this._bin(n)];case 201:return n=this._view.getUint32(this._offset),i=this._view.getInt8(this._offset+4),this._offset+=5,[i,this._bin(n)];case 202:return e=this._view.getFloat32(this._offset),this._offset+=4,e;case 203:return e=this._view.getFloat64(this._offset),this._offset+=8,e;case 204:return e=this._view.getUint8(this._offset),this._offset+=1,e;case 205:return e=this._view.getUint16(this._offset),this._offset+=2,e;case 206:return e=this._view.getUint32(this._offset),this._offset+=4,e;case 207:return r=this._view.getUint32(this._offset)*Math.pow(2,32),o=this._view.getUint32(this._offset+4),this._offset+=8,r+o;case 208:return e=this._view.getInt8(this._offset),this._offset+=1,e;case 209:return e=this._view.getInt16(this._offset),this._offset+=2,e;case 210:return e=this._view.getInt32(this._offset),this._offset+=4,e;case 211:return r=this._view.getInt32(this._offset)*Math.pow(2,32),o=this._view.getUint32(this._offset+4),this._offset+=8,r+o;case 212:return i=this._view.getInt8(this._offset),this._offset+=1,0===i?void(this._offset+=1):[i,this._bin(1)];case 213:return i=this._view.getInt8(this._offset),this._offset+=1,[i,this._bin(2)];case 214:return i=this._view.getInt8(this._offset),this._offset+=1,[i,this._bin(4)];case 215:return i=this._view.getInt8(this._offset),this._offset+=1,0===i?(r=this._view.getInt32(this._offset)*Math.pow(2,32),o=this._view.getUint32(this._offset+4),this._offset+=8,new Date(r+o)):[i,this._bin(8)];case 216:return i=this._view.getInt8(this._offset),this._offset+=1,[i,this._bin(16)];case 217:return n=this._view.getUint8(this._offset),this._offset+=1,this._str(n);case 218:return n=this._view.getUint16(this._offset),this._offset+=2,this._str(n);case 219:return n=this._view.getUint32(this._offset),this._offset+=4,this._str(n);case 220:return n=this._view.getUint16(this._offset),this._offset+=2,this._array(n);case 221:return n=this._view.getUint32(this._offset),this._offset+=4,this._array(n);case 222:return n=this._view.getUint16(this._offset),this._offset+=2,this._map(n);case 223:return n=this._view.getUint32(this._offset),this._offset+=4,this._map(n)}throw new Error("Could not parse")};var E,O,I=globalThis.WebSocket||function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")},b=function(){function e(e){this.events=e}return e.prototype.send=function(e){e instanceof ArrayBuffer?this.ws.send(e):Array.isArray(e)&&this.ws.send(new Uint8Array(e).buffer)},e.prototype.connect=function(e){this.ws=new I(e,this.protocols),this.ws.binaryType="arraybuffer",this.ws.onopen=this.events.onopen,this.ws.onmessage=this.events.onmessage,this.ws.onclose=this.events.onclose,this.ws.onerror=this.events.onerror},e.prototype.close=function(e,t){this.ws.close(e,t)},e}(),x=function(){function e(){this.events={},this.transport=new b(this.events)}return e.prototype.send=function(e){this.transport.send(e)},e.prototype.connect=function(e){this.transport.connect(e)},e.prototype.close=function(e,t){this.transport.close(e,t)},e}(),R={};function T(e,t){R[e]=t}function C(e){var t=R[e];if(!t)throw new Error("missing serializer: "+e);return t}e.Protocol=void 0,(E=e.Protocol||(e.Protocol={}))[E.HANDSHAKE=9]="HANDSHAKE",E[E.JOIN_ROOM=10]="JOIN_ROOM",E[E.ERROR=11]="ERROR",E[E.LEAVE_ROOM=12]="LEAVE_ROOM",E[E.ROOM_DATA=13]="ROOM_DATA",E[E.ROOM_STATE=14]="ROOM_STATE",E[E.ROOM_STATE_PATCH=15]="ROOM_STATE_PATCH",E[E.ROOM_DATA_SCHEMA=16]="ROOM_DATA_SCHEMA",e.ErrorCode=void 0,(O=e.ErrorCode||(e.ErrorCode={}))[O.MATCHMAKE_NO_HANDLER=4210]="MATCHMAKE_NO_HANDLER",O[O.MATCHMAKE_INVALID_CRITERIA=4211]="MATCHMAKE_INVALID_CRITERIA",O[O.MATCHMAKE_INVALID_ROOM_ID=4212]="MATCHMAKE_INVALID_ROOM_ID",O[O.MATCHMAKE_UNHANDLED=4213]="MATCHMAKE_UNHANDLED",O[O.MATCHMAKE_EXPIRED=4214]="MATCHMAKE_EXPIRED",O[O.AUTH_FAILED=4215]="AUTH_FAILED",O[O.APPLICATION_ERROR=4216]="APPLICATION_ERROR";var P=function(){function e(){this.handlers=[]}return e.prototype.register=function(e,t){return this.handlers.push(e),this},e.prototype.invoke=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.handlers.forEach((function(n){return n.apply(e,t)}))},e.prototype.invokeAsync=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Promise.all(this.handlers.map((function(n){return n.apply(e,t)})))},e.prototype.remove=function(e){var t=this.handlers.indexOf(e);this.handlers[t]=this.handlers[this.handlers.length-1],this.handlers.pop()},e.prototype.clear=function(){this.handlers=[]},e}();function S(){var e=new P;function t(t){return e.register(t,null===this)}return t.once=function(t){e.register((function n(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];t.apply(this,i),e.remove(n)}))},t.remove=function(t){return e.remove(t)},t.invoke=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.invoke.apply(e,t)},t.invokeAsync=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.invokeAsync.apply(e,t)},t.clear=function(){return e.clear()},t}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var N,D=function(e){var t={exports:{}};return e(t,t.exports),t.exports}((function(e,t){!function(e){
/*! *****************************************************************************
              Copyright (c) Microsoft Corporation.
                    Permission to use, copy, modify, and/or distribute this software for any
              purpose with or without fee is hereby granted.
                    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
              REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
              AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
              INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
              LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
              OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
              PERFORMANCE OF THIS SOFTWARE.
              ***************************************************************************** */
var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,n)};function n(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}function i(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function r(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e}var o,s=255,a=213;e.OPERATION=void 0,(o=e.OPERATION||(e.OPERATION={}))[o.ADD=128]="ADD",o[o.REPLACE=0]="REPLACE",o[o.DELETE=64]="DELETE",o[o.DELETE_AND_ADD=192]="DELETE_AND_ADD",o[o.TOUCH=1]="TOUCH",o[o.CLEAR=10]="CLEAR";var f=function(){function e(){this.refs=new Map,this.refCounts={},this.deletedRefs=new Set,this.nextUniqueId=0}return e.prototype.getNextUniqueId=function(){return this.nextUniqueId++},e.prototype.addRef=function(e,t,n){void 0===n&&(n=!0),this.refs.set(e,t),n&&(this.refCounts[e]=(this.refCounts[e]||0)+1)},e.prototype.removeRef=function(e){this.refCounts[e]=this.refCounts[e]-1,this.deletedRefs.add(e)},e.prototype.clearRefs=function(){this.refs.clear(),this.deletedRefs.clear(),this.refCounts={}},e.prototype.garbageCollectDeletedRefs=function(){var e=this;this.deletedRefs.forEach((function(t){if(e.refCounts[t]<=0){var n=e.refs.get(t);if(n instanceof Re)for(var i in n._definition.schema)"string"!=typeof n._definition.schema[i]&&n[i]&&n[i].$changes&&e.removeRef(n[i].$changes.refId);else{var r=n.$changes.parent._definition,o=r.schema[r.fieldsByIndex[n.$changes.parentIndex]];"function"==typeof Object.values(o)[0]&&Array.from(n.values()).forEach((function(t){return e.removeRef(t.$changes.refId)}))}e.refs.delete(t),delete e.refCounts[t]}})),this.deletedRefs.clear()},e}(),h=function(){function t(e,t,n){this.changed=!1,this.changes=new Map,this.allChanges=new Set,this.caches={},this.currentCustomOperation=0,this.ref=e,this.setParent(t,n)}return t.prototype.setParent=function(e,t,n){var i=this;if(this.indexes||(this.indexes=this.ref instanceof Re?this.ref._definition.indexes:{}),this.parent=e,this.parentIndex=n,t)if(this.root=t,this.ref instanceof Re){var r=this.ref._definition;for(var o in r.schema){var s=this.ref[o];if(s&&s.$changes){var a=r.indexes[o];s.$changes.setParent(this.ref,t,a)}}}else"object"==typeof this.ref&&this.ref.forEach((function(e,t){if(e instanceof Re){var n=e.$changes,r=i.ref.$changes.indexes[t];n.setParent(i.ref,i.root,r)}}))},t.prototype.operation=function(e){this.changes.set(--this.currentCustomOperation,e)},t.prototype.change=function(t,n){void 0===n&&(n=e.OPERATION.ADD);var i="number"==typeof t?t:this.indexes[t];this.assertValidIndex(i,t);var r=this.changes.get(i);r&&r.op!==e.OPERATION.DELETE&&r.op!==e.OPERATION.TOUCH||this.changes.set(i,{op:r&&r.op===e.OPERATION.DELETE?e.OPERATION.DELETE_AND_ADD:n,index:i}),this.allChanges.add(i),this.changed=!0,this.touchParents()},t.prototype.touch=function(t){var n="number"==typeof t?t:this.indexes[t];this.assertValidIndex(n,t),this.changes.has(n)||this.changes.set(n,{op:e.OPERATION.TOUCH,index:n}),this.allChanges.add(n),this.touchParents()},t.prototype.touchParents=function(){this.parent&&this.parent.$changes.touch(this.parentIndex)},t.prototype.getType=function(e){if(this.ref._definition)return(t=this.ref._definition).schema[t.fieldsByIndex[e]];var t,n=(t=this.parent._definition).schema[t.fieldsByIndex[this.parentIndex]];return Object.values(n)[0]},t.prototype.getChildrenFilter=function(){var e=this.parent._definition.childFilters;return e&&e[this.parentIndex]},t.prototype.getValue=function(e){return this.ref.getByIndex(e)},t.prototype.delete=function(t){var n="number"==typeof t?t:this.indexes[t];if(void 0!==n){var i=this.getValue(n);this.changes.set(n,{op:e.OPERATION.DELETE,index:n}),this.allChanges.delete(n),delete this.caches[n],i&&i.$changes&&(i.$changes.parent=void 0),this.changed=!0,this.touchParents()}else console.warn("@colyseus/schema "+this.ref.constructor.name+": trying to delete non-existing index: "+t+" ("+n+")")},t.prototype.discard=function(t,n){var i=this;void 0===t&&(t=!1),void 0===n&&(n=!1),this.ref instanceof Re||this.changes.forEach((function(t){if(t.op===e.OPERATION.DELETE){var n=i.ref.getIndex(t.index);delete i.indexes[n]}})),this.changes.clear(),this.changed=t,n&&this.allChanges.clear(),this.currentCustomOperation=0},t.prototype.discardAll=function(){var e=this;this.changes.forEach((function(t){var n=e.getValue(t.index);n&&n.$changes&&n.$changes.discardAll()})),this.discard()},t.prototype.cache=function(e,t){this.caches[e]=t},t.prototype.clone=function(){return new t(this.ref,this.parent,this.root)},t.prototype.ensureRefId=function(){void 0===this.refId&&(this.refId=this.root.getNextUniqueId())},t.prototype.assertValidIndex=function(e,t){if(void 0===e)throw new Error('ChangeTree: missing index for field "'+t+'"')},t}(),c=function(e,t){var n=e.toString(),i=t.toString();return n<i?-1:n>i?1:0};function u(e){return e.$proxy=!0,e=new Proxy(e,{get:function(e,t){return"symbol"==typeof t||isNaN(t)?e[t]:e.at(t)},set:function(e,t,n){if("symbol"==typeof t||isNaN(t))e[t]=n;else{var i=Array.from(e.$items.keys()),r=parseInt(i[t]||t);null==n?e.deleteAt(r):e.setAt(r,n)}return!0},deleteProperty:function(e,t){return"number"==typeof t?e.deleteAt(t):delete e[t],!0}})}var d=function(){function t(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.$changes=new h(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,this.push.apply(this,e)}return t.is=function(e){return Array.isArray(e)},Object.defineProperty(t.prototype,"length",{get:function(){return this.$items.size},set:function(e){0===e?this.clear():this.splice(e,this.length-e)},enumerable:!1,configurable:!0}),t.prototype.push=function(){for(var e,t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return n.forEach((function(n){e=t.$refId++,t.setAt(e,n)})),e},t.prototype.pop=function(){var e=Array.from(this.$indexes.values()).pop();if(void 0!==e){this.$changes.delete(e),this.$indexes.delete(e);var t=this.$items.get(e);return this.$items.delete(e),t}},t.prototype.at=function(e){var t=Array.from(this.$items.keys())[e];return this.$items.get(t)},t.prototype.setAt=function(t,n){var i,r;void 0!==n.$changes&&n.$changes.setParent(this,this.$changes.root,t);var o=null!==(r=null===(i=this.$changes.indexes[t])||void 0===i?void 0:i.op)&&void 0!==r?r:e.OPERATION.ADD;this.$changes.indexes[t]=t,this.$indexes.set(t,t),this.$items.set(t,n),this.$changes.change(t,o)},t.prototype.deleteAt=function(e){var t=Array.from(this.$items.keys())[e];return void 0!==t&&this.$deleteAt(t)},t.prototype.$deleteAt=function(e){return this.$changes.delete(e),this.$indexes.delete(e),this.$items.delete(e)},t.prototype.clear=function(t){var n=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),t&&"string"!=typeof this.$changes.getType()&&this.$items.forEach((function(e){n.$changes.root.removeRef(e.$changes.refId)})),this.$items.clear(),this.$changes.operation({index:0,op:e.OPERATION.CLEAR}),this.$changes.touchParents()},t.prototype.concat=function(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return new(t.bind.apply(t,r([void 0],(e=Array.from(this.$items.values())).concat.apply(e,n))))},t.prototype.join=function(e){return Array.from(this.$items.values()).join(e)},t.prototype.reverse=function(){var e=this,t=Array.from(this.$items.keys());return Array.from(this.$items.values()).reverse().forEach((function(n,i){e.setAt(t[i],n)})),this},t.prototype.shift=function(){var e=Array.from(this.$items.keys()).shift();if(void 0!==e){var t=this.$items.get(e);return this.$deleteAt(e),t}},t.prototype.slice=function(e,n){return new(t.bind.apply(t,r([void 0],Array.from(this.$items.values()).slice(e,n))))},t.prototype.sort=function(e){var t=this;void 0===e&&(e=c);var n=Array.from(this.$items.keys());return Array.from(this.$items.values()).sort(e).forEach((function(e,i){t.setAt(n[i],e)})),this},t.prototype.splice=function(e,t){void 0===t&&(t=this.length-e);for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];for(var r=Array.from(this.$items.keys()),o=[],s=e;s<e+t;s++)o.push(this.$items.get(r[s])),this.$deleteAt(r[s]);return o},t.prototype.unshift=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=this.length,r=t.length,o=Array.from(this.$items.values());return t.forEach((function(t,n){e.setAt(n,t)})),o.forEach((function(t,n){e.setAt(r+n,t)})),i+r},t.prototype.indexOf=function(e,t){return Array.from(this.$items.values()).indexOf(e,t)},t.prototype.lastIndexOf=function(e,t){return void 0===t&&(t=this.length-1),Array.from(this.$items.values()).lastIndexOf(e,t)},t.prototype.every=function(e,t){return Array.from(this.$items.values()).every(e,t)},t.prototype.some=function(e,t){return Array.from(this.$items.values()).some(e,t)},t.prototype.forEach=function(e,t){Array.from(this.$items.values()).forEach(e,t)},t.prototype.map=function(e,t){return Array.from(this.$items.values()).map(e,t)},t.prototype.filter=function(e,t){return Array.from(this.$items.values()).filter(e,t)},t.prototype.reduce=function(e,t){return Array.from(this.$items.values()).reduce(e,t)},t.prototype.reduceRight=function(e,t){return Array.from(this.$items.values()).reduceRight(e,t)},t.prototype.find=function(e,t){return Array.from(this.$items.values()).find(e,t)},t.prototype.findIndex=function(e,t){return Array.from(this.$items.values()).findIndex(e,t)},t.prototype.fill=function(e,t,n){throw new Error("ArraySchema#fill() not implemented")},t.prototype.copyWithin=function(e,t,n){throw new Error("ArraySchema#copyWithin() not implemented")},t.prototype.toString=function(){return this.$items.toString()},t.prototype.toLocaleString=function(){return this.$items.toLocaleString()},t.prototype[Symbol.iterator]=function(){return Array.from(this.$items.values())[Symbol.iterator]()},t.prototype[Symbol.unscopables]=function(){return this.$items[Symbol.unscopables]()},t.prototype.entries=function(){return this.$items.entries()},t.prototype.keys=function(){return this.$items.keys()},t.prototype.values=function(){return this.$items.values()},t.prototype.includes=function(e,t){return Array.from(this.$items.values()).includes(e,t)},t.prototype.flatMap=function(e,t){throw new Error("ArraySchema#flatMap() is not supported.")},t.prototype.flat=function(e){throw new Error("ArraySchema#flat() is not supported.")},t.prototype.setIndex=function(e,t){this.$indexes.set(e,t)},t.prototype.getIndex=function(e){return this.$indexes.get(e)},t.prototype.getByIndex=function(e){return this.$items.get(this.$indexes.get(e))},t.prototype.deleteByIndex=function(e){var t=this.$indexes.get(e);this.$items.delete(t),this.$indexes.delete(e)},t.prototype.toArray=function(){return Array.from(this.$items.values())},t.prototype.toJSON=function(){return this.toArray().map((function(e){return"function"==typeof e.toJSON?e.toJSON():e}))},t.prototype.clone=function(e){return e?new(t.bind.apply(t,r([void 0],Array.from(this.$items.values())))):new(t.bind.apply(t,r([void 0],this.map((function(e){return e.$changes?e.clone():e})))))},t.prototype.triggerAll=function(){Re.prototype.triggerAll.apply(this)},t}();function p(e){return e.$proxy=!0,e=new Proxy(e,{get:function(e,t){return"symbol"!=typeof t&&void 0===e[t]?e.get(t):e[t]},set:function(e,t,n){return"symbol"!=typeof t&&-1===t.indexOf("$")&&"onAdd"!==t&&"onRemove"!==t&&"onChange"!==t?e.set(t,n):e[t]=n,!0},deleteProperty:function(e,t){return e.delete(t),!0}})}var l=function(){function t(e){var t=this;if(this.$changes=new h(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,e)if(e instanceof Map)e.forEach((function(e,n){return t.set(n,e)}));else for(var n in e)this.set(n,e[n])}return t.is=function(e){return void 0!==e.map},t.prototype[Symbol.iterator]=function(){return this.$items[Symbol.iterator]()},Object.defineProperty(t.prototype,Symbol.toStringTag,{get:function(){return this.$items[Symbol.toStringTag]},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n){var i=void 0!==this.$changes.indexes[t],r=i?this.$changes.indexes[t]:this.$refId++,o=i?e.OPERATION.REPLACE:e.OPERATION.ADD,s=void 0!==n.$changes;return s&&n.$changes.setParent(this,this.$changes.root,r),i?s&&this.$items.get(t)!==n&&(o=e.OPERATION.ADD):(this.$changes.indexes[t]=r,this.$indexes.set(r,t)),this.$items.set(t,n),this.$changes.change(t,o),this},t.prototype.get=function(e){return this.$items.get(e)},t.prototype.delete=function(e){return this.$changes.delete(e),this.$items.delete(e)},t.prototype.clear=function(t){var n=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),t&&"string"!=typeof this.$changes.getType()&&this.$items.forEach((function(e){n.$changes.root.removeRef(e.$changes.refId)})),this.$items.clear(),this.$changes.operation({index:0,op:e.OPERATION.CLEAR}),this.$changes.touchParents()},t.prototype.has=function(e){return this.$items.has(e)},t.prototype.forEach=function(e){this.$items.forEach(e)},t.prototype.entries=function(){return this.$items.entries()},t.prototype.keys=function(){return this.$items.keys()},t.prototype.values=function(){return this.$items.values()},Object.defineProperty(t.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),t.prototype.setIndex=function(e,t){this.$indexes.set(e,t)},t.prototype.getIndex=function(e){return this.$indexes.get(e)},t.prototype.getByIndex=function(e){return this.$items.get(this.$indexes.get(e))},t.prototype.deleteByIndex=function(e){var t=this.$indexes.get(e);this.$items.delete(t),this.$indexes.delete(e)},t.prototype.toJSON=function(){var e={};return this.forEach((function(t,n){e[n]="function"==typeof t.toJSON?t.toJSON():t})),e},t.prototype.clone=function(e){var n;return e?n=Object.assign(new t,this):(n=new t,this.forEach((function(e,t){e.$changes?n.set(t,e.clone()):n.set(t,e)}))),n},t.prototype.triggerAll=function(){Re.prototype.triggerAll.apply(this)},t}(),v={};function y(e,t){v[e]=t}function g(e){return v[e]}var m=function(){function e(){this.indexes={},this.fieldsByIndex={},this.deprecated={},this.descriptors={}}return e.create=function(t){var n=new e;return n.schema=Object.assign({},t&&t.schema||{}),n.indexes=Object.assign({},t&&t.indexes||{}),n.fieldsByIndex=Object.assign({},t&&t.fieldsByIndex||{}),n.descriptors=Object.assign({},t&&t.descriptors||{}),n.deprecated=Object.assign({},t&&t.deprecated||{}),n},e.prototype.addField=function(e,t){var n=this.getNextFieldIndex();this.fieldsByIndex[n]=e,this.indexes[e]=n,this.schema[e]=Array.isArray(t)?{array:t[0]}:t},e.prototype.addFilter=function(e,t){return this.filters||(this.filters={},this.indexesWithFilters=[]),this.filters[this.indexes[e]]=t,this.indexesWithFilters.push(this.indexes[e]),!0},e.prototype.addChildrenFilter=function(e,t){var n=this.indexes[e],i=this.schema[e];if(g(Object.keys(i)[0]))return this.childFilters||(this.childFilters={}),this.childFilters[n]=t,!0;console.warn("@filterChildren: field '"+e+"' can't have children. Ignoring filter.")},e.prototype.getChildrenFilter=function(e){return this.childFilters&&this.childFilters[this.indexes[e]]},e.prototype.getNextFieldIndex=function(){return Object.keys(this.schema||{}).length},e}();function _(e){return e._context&&e._context.useFilters}var w=function(){function e(){this.types={},this.schemas=new Map,this.useFilters=!1}return e.prototype.has=function(e){return this.schemas.has(e)},e.prototype.get=function(e){return this.types[e]},e.prototype.add=function(e,t){void 0===t&&(t=this.schemas.size),e._definition=m.create(e._definition),e._typeid=t,this.types[t]=e,this.schemas.set(e,t)},e.create=function(t){return void 0===t&&(t=new e),function(e){return $(e,t)}},e}(),A=new w;function $(e,t){return void 0===t&&(t=A),function(n,i){var o=n.constructor;o._context=t,t.has(o)||t.add(o);var s=o._definition;if(s.addField(i,e),s.descriptors[i]){if(s.deprecated[i])return;try{throw new Error("@colyseus/schema: Duplicate '"+i+"' definition on '"+o.name+"'.\nCheck @type() annotation")}catch(e){var a=e.stack.split("\n")[4].trim();throw new Error(e.message+" "+a)}}var f=d.is(e),h=!f&&l.is(e);if("string"!=typeof e&&!Re.is(e)){var c=Object.values(e)[0];"string"==typeof c||t.has(c)||t.add(c)}var v="_"+i;s.descriptors[v]={enumerable:!1,configurable:!1,writable:!0},s.descriptors[i]={get:function(){return this[v]},set:function(e){e!==this[v]&&(null!=e?(!f||e instanceof d||(e=new(d.bind.apply(d,r([void 0],e)))),!h||e instanceof l||(e=new l(e)),void 0===e.$proxy&&(h?e=p(e):f&&(e=u(e))),this.$changes.change(i),e.$changes&&e.$changes.setParent(this,this.$changes.root,this._definition.indexes[i])):this.$changes.delete(i),this[v]=e)},enumerable:!0,configurable:!0}}}function E(e){return function(t,n){var i=t.constructor;i._definition.addFilter(n,e)&&(i._context.useFilters=!0)}}function O(e){return function(t,n){var i=t.constructor;i._definition.addChildrenFilter(n,e)&&(i._context.useFilters=!0)}}function I(e,t){return void 0===e&&(e=!0),function(t,n){var i=t.constructor._definition;i.deprecated[n]=!0,e&&(i.descriptors[n]={get:function(){throw new Error(n+" is deprecated.")},set:function(e){},enumerable:!1,configurable:!0})}}function b(e,t,n){for(var i in void 0===n&&(n=e._context||A),t)$(t[i],n)(e.prototype,i);return e}function x(e){for(var t=0,n=0,i=0,r=e.length;i<r;i++)(t=e.charCodeAt(i))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(i++,n+=4);return n}function R(e,t,n){for(var i=0,r=0,o=n.length;r<o;r++)(i=n.charCodeAt(r))<128?e[t++]=i:i<2048?(e[t++]=192|i>>6,e[t++]=128|63&i):i<55296||i>=57344?(e[t++]=224|i>>12,e[t++]=128|i>>6&63,e[t++]=128|63&i):(r++,i=65536+((1023&i)<<10|1023&n.charCodeAt(r)),e[t++]=240|i>>18,e[t++]=128|i>>12&63,e[t++]=128|i>>6&63,e[t++]=128|63&i)}function T(e,t){e.push(255&t)}function C(e,t){e.push(255&t)}function P(e,t){e.push(255&t),e.push(t>>8&255)}function S(e,t){e.push(255&t),e.push(t>>8&255)}function N(e,t){e.push(255&t),e.push(t>>8&255),e.push(t>>16&255),e.push(t>>24&255)}function D(e,t){var n=t>>24,i=t>>16,r=t>>8,o=t;e.push(255&o),e.push(255&r),e.push(255&i),e.push(255&n)}function M(e,t){var n=Math.floor(t/Math.pow(2,32));D(e,t>>>0),D(e,n)}function k(e,t){var n=t/Math.pow(2,32)>>0;D(e,t>>>0),D(e,n)}function j(e,t){B(e,t)}function U(e,t){z(e,t)}var L=new Int32Array(2),F=new Float32Array(L.buffer),H=new Float64Array(L.buffer);function B(e,t){F[0]=t,N(e,L[0])}function z(e,t){H[0]=t,N(e,L[0]),N(e,L[1])}function V(e,t){return C(e,t?1:0)}function q(e,t){t||(t="");var n=x(t),i=0;if(n<32)e.push(160|n),i=1;else if(n<256)e.push(217),C(e,n),i=2;else if(n<65536)e.push(218),S(e,n),i=3;else{if(!(n<4294967296))throw new Error("String too long");e.push(219),D(e,n),i=5}return R(e,e.length,t),i+n}function J(e,t){return isNaN(t)?J(e,0):isFinite(t)?t!==(0|t)?(e.push(203),z(e,t),9):t>=0?t<128?(C(e,t),1):t<256?(e.push(204),C(e,t),2):t<65536?(e.push(205),S(e,t),3):t<4294967296?(e.push(206),D(e,t),5):(e.push(207),k(e,t),9):t>=-32?(e.push(224|t+32),1):t>=-128?(e.push(208),T(e,t),2):t>=-32768?(e.push(209),P(e,t),3):t>=-2147483648?(e.push(210),N(e,t),5):(e.push(211),M(e,t),9):J(e,t>0?Number.MAX_SAFE_INTEGER:-Number.MAX_SAFE_INTEGER)}var K=Object.freeze({__proto__:null,utf8Write:R,int8:T,uint8:C,int16:P,uint16:S,int32:N,uint32:D,int64:M,uint64:k,float32:j,float64:U,writeFloat32:B,writeFloat64:z,boolean:V,string:q,number:J});function W(e,t,n){for(var i="",r=0,o=t,s=t+n;o<s;o++){var a=e[o];0!=(128&a)?192!=(224&a)?224!=(240&a)?240!=(248&a)?console.error("Invalid byte "+a.toString(16)):(r=(7&a)<<18|(63&e[++o])<<12|(63&e[++o])<<6|(63&e[++o])<<0)>=65536?(r-=65536,i+=String.fromCharCode(55296+(r>>>10),56320+(1023&r))):i+=String.fromCharCode(r):i+=String.fromCharCode((15&a)<<12|(63&e[++o])<<6|(63&e[++o])<<0):i+=String.fromCharCode((31&a)<<6|63&e[++o]):i+=String.fromCharCode(a)}return i}function X(e,t){return G(e,t)<<24>>24}function G(e,t){return e[t.offset++]}function Q(e,t){return Y(e,t)<<16>>16}function Y(e,t){return e[t.offset++]|e[t.offset++]<<8}function Z(e,t){return e[t.offset++]|e[t.offset++]<<8|e[t.offset++]<<16|e[t.offset++]<<24}function ee(e,t){return Z(e,t)>>>0}function te(e,t){return he(e,t)}function ne(e,t){return ce(e,t)}function ie(e,t){var n=ee(e,t);return Z(e,t)*Math.pow(2,32)+n}function re(e,t){var n=ee(e,t);return ee(e,t)*Math.pow(2,32)+n}var oe=new Int32Array(2),ae=new Float32Array(oe.buffer),fe=new Float64Array(oe.buffer);function he(e,t){return oe[0]=Z(e,t),ae[0]}function ce(e,t){return oe[0]=Z(e,t),oe[1]=Z(e,t),fe[0]}function ue(e,t){return G(e,t)>0}function de(e,t){var n,i=e[t.offset++];i<192?n=31&i:217===i?n=G(e,t):218===i?n=Y(e,t):219===i&&(n=ee(e,t));var r=W(e,t.offset,n);return t.offset+=n,r}function pe(e,t){var n=e[t.offset];return n<192&&n>160||217===n||218===n||219===n}function le(e,t){var n=e[t.offset++];return n<128?n:202===n?he(e,t):203===n?ce(e,t):204===n?G(e,t):205===n?Y(e,t):206===n?ee(e,t):207===n?re(e,t):208===n?X(e,t):209===n?Q(e,t):210===n?Z(e,t):211===n?ie(e,t):n>223?-1*(255-n+1):void 0}function ve(e,t){var n=e[t.offset];return n<128||n>=202&&n<=211}function ye(e,t){return e[t.offset]<160}function ge(e,t){return e[t.offset-1]===s&&(e[t.offset]<128||e[t.offset]>=202&&e[t.offset]<=211)}var me=Object.freeze({__proto__:null,int8:X,uint8:G,int16:Q,uint16:Y,int32:Z,uint32:ee,float32:te,float64:ne,int64:ie,uint64:re,readFloat32:he,readFloat64:ce,boolean:ue,string:de,stringCheck:pe,number:le,numberCheck:ve,arrayCheck:ye,switchStructureCheck:ge}),_e=function(){function t(e){var t=this;this.$changes=new h(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,e&&e.forEach((function(e){return t.add(e)}))}return t.is=function(e){return void 0!==e.collection},t.prototype.add=function(e){var t=this.$refId++;return void 0!==e.$changes&&e.$changes.setParent(this,this.$changes.root,t),this.$changes.indexes[t]=t,this.$indexes.set(t,t),this.$items.set(t,e),this.$changes.change(t),t},t.prototype.at=function(e){var t=Array.from(this.$items.keys())[e];return this.$items.get(t)},t.prototype.entries=function(){return this.$items.entries()},t.prototype.delete=function(e){for(var t,n,i=this.$items.entries();(n=i.next())&&!n.done;)if(e===n.value[1]){t=n.value[0];break}return void 0!==t&&(this.$changes.delete(t),this.$indexes.delete(t),this.$items.delete(t))},t.prototype.clear=function(t){var n=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),t&&"string"!=typeof this.$changes.getType()&&this.$items.forEach((function(e){n.$changes.root.removeRef(e.$changes.refId)})),this.$items.clear(),this.$changes.operation({index:0,op:e.OPERATION.CLEAR}),this.$changes.touchParents()},t.prototype.has=function(e){return Array.from(this.$items.values()).some((function(t){return t===e}))},t.prototype.forEach=function(e){var t=this;this.$items.forEach((function(n,i,r){return e(n,i,t)}))},t.prototype.values=function(){return this.$items.values()},Object.defineProperty(t.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),t.prototype.setIndex=function(e,t){this.$indexes.set(e,t)},t.prototype.getIndex=function(e){return this.$indexes.get(e)},t.prototype.getByIndex=function(e){return this.$items.get(this.$indexes.get(e))},t.prototype.deleteByIndex=function(e){var t=this.$indexes.get(e);this.$items.delete(t),this.$indexes.delete(e)},t.prototype.toArray=function(){return Array.from(this.$items.values())},t.prototype.toJSON=function(){var e=[];return this.forEach((function(t,n){e.push("function"==typeof t.toJSON?t.toJSON():t)})),e},t.prototype.clone=function(e){var n;return e?n=Object.assign(new t,this):(n=new t,this.forEach((function(e){e.$changes?n.add(e.clone()):n.add(e)}))),n},t.prototype.triggerAll=function(){Re.prototype.triggerAll.apply(this)},t}(),we=function(){function t(e){var t=this;this.$changes=new h(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,e&&e.forEach((function(e){return t.add(e)}))}return t.is=function(e){return void 0!==e.set},t.prototype.add=function(t){var n,i;if(this.has(t))return!1;var r=this.$refId++;void 0!==t.$changes&&t.$changes.setParent(this,this.$changes.root,r);var o=null!==(i=null===(n=this.$changes.indexes[r])||void 0===n?void 0:n.op)&&void 0!==i?i:e.OPERATION.ADD;return this.$changes.indexes[r]=r,this.$indexes.set(r,r),this.$items.set(r,t),this.$changes.change(r,o),r},t.prototype.entries=function(){return this.$items.entries()},t.prototype.delete=function(e){for(var t,n,i=this.$items.entries();(n=i.next())&&!n.done;)if(e===n.value[1]){t=n.value[0];break}return void 0!==t&&(this.$changes.delete(t),this.$indexes.delete(t),this.$items.delete(t))},t.prototype.clear=function(t){var n=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),t&&"string"!=typeof this.$changes.getType()&&this.$items.forEach((function(e){n.$changes.root.removeRef(e.$changes.refId)})),this.$items.clear(),this.$changes.operation({index:0,op:e.OPERATION.CLEAR}),this.$changes.touchParents()},t.prototype.has=function(e){for(var t,n=this.$items.values(),i=!1;(t=n.next())&&!t.done;)if(e===t.value){i=!0;break}return i},t.prototype.forEach=function(e){var t=this;this.$items.forEach((function(n,i,r){return e(n,i,t)}))},t.prototype.values=function(){return this.$items.values()},Object.defineProperty(t.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),t.prototype.setIndex=function(e,t){this.$indexes.set(e,t)},t.prototype.getIndex=function(e){return this.$indexes.get(e)},t.prototype.getByIndex=function(e){return this.$items.get(this.$indexes.get(e))},t.prototype.deleteByIndex=function(e){var t=this.$indexes.get(e);this.$items.delete(t),this.$indexes.delete(e)},t.prototype.toArray=function(){return Array.from(this.$items.values())},t.prototype.toJSON=function(){var e=[];return this.forEach((function(t,n){e.push("function"==typeof t.toJSON?t.toJSON():t)})),e},t.prototype.clone=function(e){var n;return e?n=Object.assign(new t,this):(n=new t,this.forEach((function(e){e.$changes?n.add(e.clone()):n.add(e)}))),n},t.prototype.triggerAll=function(){Re.prototype.triggerAll.apply(this)},t}(),Ae=function(){function e(){this.handlers=[]}return e.prototype.register=function(e,t){return this.handlers.push(e),this},e.prototype.invoke=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.handlers.forEach((function(t){return t.apply(void 0,e)}))},e.prototype.invokeAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];se.all(this.handlers.map((function(t){return t.apply(void 0,e)})))},e.prototype.remove=function(e){var t=this.handlers.indexOf(e);this.handlers[t]=this.handlers[this.handlers.length-1],this.handlers.pop()},e.prototype.clear=function(){this.handlers=[]},e}(),$e=function(){function e(){this.refIds=new WeakSet,this.containerIndexes=new WeakMap}return e.prototype.addRefId=function(e){this.refIds.has(e)||(this.refIds.add(e),this.containerIndexes.set(e,new Set))},e.get=function(t){return void 0===t.$filterState&&(t.$filterState=new e),t.$filterState},e}(),Ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(Error);function Oe(e,t,n,i){var r,o=!1;switch(t){case"number":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":case"int64":case"uint64":case"float32":case"float64":r="number",isNaN(e)&&console.log('trying to encode "NaN" in '+n.constructor.name+"#"+i);break;case"string":r="string",o=!0;break;case"boolean":return}if(typeof e!==r&&(!o||o&&null!==e)){var s="'"+JSON.stringify(e)+"'"+(e&&e.constructor&&" ("+e.constructor.name+")"||"");throw new Ee("a '"+r+"' was expected, but "+s+" was provided in "+n.constructor.name+"#"+i)}}function Ie(e,t,n,i){if(!(e instanceof t))throw new Ee("a '"+t.name+"' was expected, but '"+e.constructor.name+"' was provided in "+n.constructor.name+"#"+i)}function be(e,t,n,i,r){Oe(n,e,i,r);var o=K[e];if(!o)throw new Ee("a '"+e+"' was expected, but "+n+" was provided in "+i.constructor.name+"#"+r);o(t,n)}function xe(e,t,n){return me[e](t,n)}var Re=function(){function t(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Object.defineProperties(this,{$changes:{value:new h(this,void 0,new f),enumerable:!1,writable:!0},$listeners:{value:{},enumerable:!1,writable:!0}});var n=this._definition.descriptors;n&&Object.defineProperties(this,n),e[0]&&this.assign(e[0])}return t.onError=function(e){console.error(e)},t.is=function(e){return e._definition&&void 0!==e._definition.schema},t.prototype.assign=function(e){return Object.assign(this,e),this},Object.defineProperty(t.prototype,"_definition",{get:function(){return this.constructor._definition},enumerable:!1,configurable:!0}),t.prototype.listen=function(e,t){var n=this;return this.$listeners[e]||(this.$listeners[e]=new Ae),this.$listeners[e].register(t),function(){return n.$listeners[e].remove(t)}},t.prototype.decode=function(n,i,r,o){void 0===i&&(i={offset:0}),void 0===r&&(r=this),void 0===o&&(o=new Map);var a=this.$changes.root,f=n.length,h=0,c=[];for(a.refs.set(h,this),o.set(h,c);i.offset<f;){var u=n[i.offset++];if(u!=s){var p=r.$changes,v=void 0!==r._definition,y=v?u>>6<<6:u;if(y!==e.OPERATION.CLEAR){var m=v?u%(y||255):le(n,i),_=v?r._definition.fieldsByIndex[m]:"",w=p.getType(m),A=void 0,$=void 0,E=void 0;if(v?$=r["_"+_]:($=r.getByIndex(m),(y&e.OPERATION.ADD)===e.OPERATION.ADD?(E=r instanceof l?de(n,i):m,r.setIndex(m,E)):E=r.getIndex(m)),(y&e.OPERATION.DELETE)===e.OPERATION.DELETE&&(y!==e.OPERATION.DELETE_AND_ADD&&r.deleteByIndex(m),$&&$.$changes&&a.removeRef($.$changes.refId),A=null),void 0!==_){if(y===e.OPERATION.DELETE);else if(t.is(w)){var O=le(n,i);if(A=a.refs.get(O),y!==e.OPERATION.REPLACE){var I=this.getSchemaType(n,i,w);A||((A=this.createTypeInstance(I)).$changes.refId=O,$&&(A.onChange=$.onChange,A.onRemove=$.onRemove,A.$listeners=$.$listeners,$.$changes.refId&&O!==$.$changes.refId&&a.removeRef($.$changes.refId))),a.addRef(O,A,A!==$)}}else if("string"==typeof w)A=xe(w,n,i);else{var b=g(Object.keys(w)[0]),x=le(n,i),R=a.refs.has(x)?$||a.refs.get(x):new b.constructor;if((A=R.clone(!0)).$changes.refId=x,$&&(A.onAdd=$.onAdd,A.onRemove=$.onRemove,A.onChange=$.onChange,$.$changes.refId&&x!==$.$changes.refId)){a.removeRef($.$changes.refId);for(var T=[],C=$.entries(),P=void 0;(P=C.next())&&!P.done;){var S=P.value,N=S[0],D=S[1];T.push({op:e.OPERATION.DELETE,field:N,value:void 0,previousValue:D})}o.set($.$changes.refId,T)}a.addRef(x,A,R!==$),b.getProxy&&(A=b.getProxy(A))}var M=$!==A;if(null!=A)if(A.$changes&&A.$changes.setParent(p.ref,p.root,m),r instanceof t)r[_]=A;else if(r instanceof l)N=E,r.$items.set(N,A);else if(r instanceof d)r.setAt(m,A);else if(r instanceof _e){var k=r.add(A);r.setIndex(m,k)}else r instanceof we&&!1!==(k=r.add(A))&&r.setIndex(m,k);M&&c.push({op:y,field:_,dynamicIndex:E,value:A,previousValue:$})}else{console.warn("@colyseus/schema: definition mismatch");for(var j={offset:i.offset};i.offset<f&&(!ge(n,i)||(j.offset=i.offset+1,!a.refs.has(le(n,j))));)i.offset++}}else r.clear(!0)}else{h=le(n,i);var U=a.refs.get(h);if(!U)throw new Error('"refId" not found: '+h);r=U,c=[],o.set(h,c)}}return this._triggerChanges(o),a.garbageCollectDeletedRefs(),o},t.prototype.encode=function(n,i,r){void 0===n&&(n=!1),void 0===i&&(i=[]),void 0===r&&(r=!1);for(var o=this.$changes,a=new WeakSet,f=[o],h=1,c=0;c<h;c++){var u=f[c],d=u.ref,p=d instanceof t;u.ensureRefId(),a.add(u),u!==o&&(u.changed||n)&&(C(i,s),J(i,u.refId));for(var v=n?Array.from(u.allChanges):Array.from(u.changes.values()),y=0,m=v.length;y<m;y++){var _=n?{op:e.OPERATION.ADD,index:v[y]}:v[y],w=_.index,A=p?d._definition.fieldsByIndex&&d._definition.fieldsByIndex[w]:w,$=i.length;if(_.op!==e.OPERATION.TOUCH)if(p)C(i,w|_.op);else{if(C(i,_.op),_.op===e.OPERATION.CLEAR)continue;J(i,w)}if(p||(_.op&e.OPERATION.ADD)!=e.OPERATION.ADD||d instanceof l&&q(i,u.ref.$indexes.get(w)),_.op!==e.OPERATION.DELETE){var E=u.getType(w),O=u.getValue(w);if(O&&O.$changes&&!a.has(O.$changes)&&(f.push(O.$changes),O.$changes.ensureRefId(),h++),_.op!==e.OPERATION.TOUCH){if(t.is(E))Ie(O,E,d,A),J(i,O.$changes.refId),(_.op&e.OPERATION.ADD)===e.OPERATION.ADD&&this.tryEncodeTypeId(i,E,O.constructor);else if("string"==typeof E)be(E,i,O,d,A);else{var I=g(Object.keys(E)[0]);Ie(d["_"+A],I.constructor,d,A),J(i,O.$changes.refId)}r&&u.cache(w,i.slice($))}}}n||r||u.discard()}return i},t.prototype.encodeAll=function(e){return this.encode(!0,[],e)},t.prototype.applyFilters=function(n,i){void 0===i&&(i=!1);for(var r=this,o=new Set,a=$e.get(n),f=[this.$changes],h=1,c=[],u=function(u){var d=f[u];if(o.has(d.refId))return"continue";var p=d.ref,v=p instanceof t;C(c,s),J(c,d.refId);var y=a.refIds.has(d),g=i||!y;a.addRefId(d);var m=a.containerIndexes.get(d),_=g?Array.from(d.allChanges):Array.from(d.changes.values());!i&&v&&p._definition.indexesWithFilters&&p._definition.indexesWithFilters.forEach((function(t){!m.has(t)&&d.allChanges.has(t)&&(g?_.push(t):_.push({op:e.OPERATION.ADD,index:t}))}));for(var w=0,A=_.length;w<A;w++){var $=g?{op:e.OPERATION.ADD,index:_[w]}:_[w];if($.op!==e.OPERATION.CLEAR){var E=$.index;if($.op!==e.OPERATION.DELETE){var O=d.getValue(E),I=d.getType(E);if(v){if((b=p._definition.filters&&p._definition.filters[E])&&!b.call(p,n,O,r)){O&&O.$changes&&o.add(O.$changes.refId);continue}}else{var b,x=d.parent;if((b=d.getChildrenFilter())&&!b.call(x,n,p.$indexes.get(E),O,r)){O&&O.$changes&&o.add(O.$changes.refId);continue}}if(O.$changes&&(f.push(O.$changes),h++),$.op!==e.OPERATION.TOUCH)if($.op===e.OPERATION.ADD||v)c=c.concat(d.caches[E]),m.add(E);else if(m.has(E))c=c.concat(d.caches[E]);else{if(m.add(E),C(c,e.OPERATION.ADD),J(c,E),p instanceof l){var R=d.ref.$indexes.get(E);q(c,R)}O.$changes?J(c,O.$changes.refId):K[I](c,O)}else O.$changes&&!v&&(C(c,e.OPERATION.ADD),J(c,E),p instanceof l&&(R=d.ref.$indexes.get(E),q(c,R)),J(c,O.$changes.refId))}else v?C(c,$.op|E):(C(c,$.op),J(c,E))}else C(c,$.op)}},d=0;d<h;d++)u(d);return c},t.prototype.clone=function(){var e=new this.constructor,t=this._definition.schema;for(var n in t)"object"==typeof this[n]&&"function"==typeof this[n].clone?e[n]=this[n].clone():e[n]=this[n];return e},t.prototype.triggerAll=function(){if(0!==this.$changes.root.refs.size){var e=new Map;t.prototype._triggerAllFillChanges.call(this,this,e);try{t.prototype._triggerChanges.call(this,e)}catch(e){t.onError(e)}}},t.prototype.toJSON=function(){var e=this._definition.schema,t=this._definition.deprecated,n={};for(var i in e)t[i]||null===this[i]||void 0===this[i]||(n[i]="function"==typeof this[i].toJSON?this[i].toJSON():this["_"+i]);return n},t.prototype.discardAllChanges=function(){this.$changes.discardAll()},t.prototype.getByIndex=function(e){return this[this._definition.fieldsByIndex[e]]},t.prototype.deleteByIndex=function(e){this[this._definition.fieldsByIndex[e]]=void 0},t.prototype.tryEncodeTypeId=function(e,t,n){t._typeid!==n._typeid&&(C(e,a),J(e,n._typeid))},t.prototype.getSchemaType=function(e,t,n){var i;return e[t.offset]===a&&(t.offset++,i=this.constructor._context.get(le(e,t))),i||n},t.prototype.createTypeInstance=function(e){var t=new e;return t.$changes.root=this.$changes.root,t},t.prototype._triggerAllFillChanges=function(n,i){if(!i.has(n.$changes.refId)){var r=[];if(i.set(n.$changes.refId||0,r),n instanceof t){var o=n._definition.schema;for(var s in o)void 0!==(u=n["_"+s])&&(r.push({op:e.OPERATION.ADD,field:s,value:u,previousValue:void 0}),void 0!==u.$changes&&t.prototype._triggerAllFillChanges.call(this,u,i))}else for(var a=n.entries(),f=void 0;(f=a.next())&&!f.done;){var h=f.value,c=h[0],u=h[1];r.push({op:e.OPERATION.ADD,field:c,dynamicIndex:c,value:u,previousValue:void 0}),void 0!==u.$changes&&t.prototype._triggerAllFillChanges.call(this,u,i)}}},t.prototype._triggerChanges=function(n){var i=this;n.forEach((function(n,r){var o,s,a,f,h,c,u,d,p,l,v,y;if(n.length>0){for(var g=i.$changes.root.refs.get(r),m=g instanceof t,_=0;_<n.length;_++){var w=n[_],A=g.$listeners&&g.$listeners[w.field];if(m||(w.op===e.OPERATION.ADD&&void 0===w.previousValue?null===(s=(o=g).onAdd)||void 0===s||s.call(o,w.value,null!==(a=w.dynamicIndex)&&void 0!==a?a:w.field):w.op===e.OPERATION.DELETE?void 0!==w.previousValue&&(null===(h=(f=g).onRemove)||void 0===h||h.call(f,w.previousValue,null!==(c=w.dynamicIndex)&&void 0!==c?c:w.field)):w.op===e.OPERATION.DELETE_AND_ADD?(void 0!==w.previousValue&&(null===(d=(u=g).onRemove)||void 0===d||d.call(u,w.previousValue,w.dynamicIndex)),null===(l=(p=g).onAdd)||void 0===l||l.call(p,w.value,w.dynamicIndex)):w.op!==e.OPERATION.REPLACE&&w.value===w.previousValue||null===(y=(v=g).onChange)||void 0===y||y.call(v,w.value,w.dynamicIndex)),(w.op&e.OPERATION.DELETE)===e.OPERATION.DELETE&&w.previousValue instanceof t&&w.previousValue.onRemove&&w.previousValue.onRemove(),A)try{A.invoke(w.value,w.previousValue)}catch(e){t.onError(e)}}if(m&&g.onChange)try{g.onChange(n)}catch(e){t.onError(e)}}}))},t._definition=m.create(),t}();function Te(e){for(var t=[e.$changes],n=1,i={},r=i,o=function(e){var n=t[e];n.changes.forEach((function(e){var t=n.ref,i=e.index,o=t._definition?t._definition.fieldsByIndex[i]:t.$indexes.get(i);r[o]=n.getValue(i)}))},s=0;s<n;s++)o(s);return i}var Ce=new w,Pe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),i([$("string",Ce)],t.prototype,"name",void 0),i([$("string",Ce)],t.prototype,"type",void 0),i([$("number",Ce)],t.prototype,"referencedType",void 0),t}(Re),Se=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fields=new d,t}return n(t,e),i([$("number",Ce)],t.prototype,"id",void 0),i([$([Pe],Ce)],t.prototype,"fields",void 0),t}(Re),Ne=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.types=new d,t}return n(t,e),t.encode=function(e){var n=e.constructor,i=new t;i.rootType=n._typeid;var r=function(e,t){for(var n in t){var r=new Pe;r.name=n;var o=void 0;if("string"==typeof t[n])o=t[n];else{var s=t[n],a=void 0;Re.is(s)?(o="ref",a=t[n]):"string"==typeof s[o=Object.keys(s)[0]]?o+=":"+s[o]:a=s[o],r.referencedType=a?a._typeid:-1}r.type=o,e.fields.push(r)}i.types.push(e)},o=n._context.types;for(var s in o){var a=new Se;a.id=Number(s),r(a,o[s]._definition.schema)}return i.encodeAll()},t.decode=function(e,i){var r=new w,o=new t;o.decode(e,i);var s=o.types.reduce((function(e,t){var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(Re),o=t.id;return e[o]=i,r.add(i,o),e}),{});o.types.forEach((function(e){var t=s[e.id];e.fields.forEach((function(e){var n;if(void 0!==e.referencedType){var i=e.type,o=s[e.referencedType];if(!o){var a=e.type.split(":");i=a[0],o=a[1]}"ref"===i?$(o,r)(t.prototype,e.name):$(((n={})[i]=o,n),r)(t.prototype,e.name)}else $(e.type,r)(t.prototype,e.name)}))}));var a=s[o.rootType],f=new a;for(var h in a._definition.schema){var c=a._definition.schema[h];"string"!=typeof c&&(f[h]="function"==typeof c?new c:new(g(Object.keys(c)[0]).constructor))}return f},i([$([Se],Ce)],t.prototype,"types",void 0),i([$("number",Ce)],t.prototype,"rootType",void 0),t}(Re);y("map",{constructor:l,getProxy:p}),y("array",{constructor:d,getProxy:u}),y("set",{constructor:we}),y("collection",{constructor:_e}),e.ArraySchema=d,e.CollectionSchema=_e,e.Context=w,e.MapSchema=l,e.Reflection=Ne,e.ReflectionField=Pe,e.ReflectionType=Se,e.Schema=Re,e.SchemaDefinition=m,e.SetSchema=we,e.decode=me,e.defineTypes=b,e.deprecated=I,e.dumpChanges=Te,e.encode=K,e.filter=E,e.filterChildren=O,e.hasFilter=_,e.registerType=y,e.type=$,Object.defineProperty(e,"__esModule",{value:!0})}(t)})),M=function(){function t(e,t){var n=this;this.onStateChange=S(),this.onError=S(),this.onLeave=S(),this.onJoin=S(),this.hasJoined=!1,this.onMessageHandlers={events:{},emit:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];(this.events[e]||[]).forEach((function(e){return e.apply(void 0,n)}))},on:function(e,t){var n=this;return(this.events[e]=this.events[e]||[]).push(t),function(){return n.events[e]=(n.events[e]||[]).filter((function(e){return e!==t}))}}},this.id=null,this.name=e,t&&(this.serializer=new(C("schema")),this.rootSchema=t,this.serializer.state=new t),this.onError((function(e,t){return console.warn("colyseus.js - onError => ("+e+") "+t)})),this.onLeave((function(){return n.removeAllListeners()}))}return t.prototype.connect=function(e){var t=this;this.connection=new x,this.connection.events.onmessage=this.onMessageCallback.bind(this),this.connection.events.onclose=function(e){if(!t.hasJoined)return console.warn("Room connection was closed unexpectedly ("+e.code+"): "+e.reason),void t.onError.invoke(e.code,e.reason);t.onLeave.invoke(e.code),t.destroy()},this.connection.events.onerror=function(e){console.warn("Room, onError ("+e.code+"): "+e.reason),t.onError.invoke(e.code,e.reason)},this.connection.connect(e)},t.prototype.leave=function(t){void 0===t&&(t=!0),this.connection?t?this.connection.send([e.Protocol.LEAVE_ROOM]):this.connection.close():this.onLeave.invoke(4e3)},t.prototype.onMessage=function(e,t){return this.onMessageHandlers.on(this.getMessageHandlerKey(e),t)},t.prototype.send=function(t,n){var i,r=[e.Protocol.ROOM_DATA];if("string"==typeof t?D.encode.string(r,t):D.encode.number(r,t),void 0!==n){var o=$(n);(i=new Uint8Array(r.length+o.byteLength)).set(new Uint8Array(r),0),i.set(new Uint8Array(o),r.length)}else i=new Uint8Array(r);this.connection.send(i.buffer)},Object.defineProperty(t.prototype,"state",{get:function(){return this.serializer.getState()},enumerable:!1,configurable:!0}),t.prototype.removeAllListeners=function(){this.onJoin.clear(),this.onStateChange.clear(),this.onError.clear(),this.onLeave.clear(),this.onMessageHandlers.events={}},t.prototype.onMessageCallback=function(t){var n=Array.from(new Uint8Array(t.data)),i=n[0];if(i===e.Protocol.JOIN_ROOM){var r=1;if(this.serializerId=function(e,t){for(var n=e[t++],i="",r=0,o=t,s=t+n;o<s;o++){var a=e[o];if(0!=(128&a))if(192!=(224&a))if(224!=(240&a)){if(240!=(248&a))throw new Error("Invalid byte "+a.toString(16));(r=(7&a)<<18|(63&e[++o])<<12|(63&e[++o])<<6|(63&e[++o])<<0)>=65536?(r-=65536,i+=String.fromCharCode(55296+(r>>>10),56320+(1023&r))):i+=String.fromCharCode(r)}else i+=String.fromCharCode((15&a)<<12|(63&e[++o])<<6|(63&e[++o])<<0);else i+=String.fromCharCode((31&a)<<6|63&e[++o]);else i+=String.fromCharCode(a)}return i}(n,r),r+=function(e){void 0===e&&(e="");for(var t=0,n=0,i=0,r=e.length;i<r;i++)(t=e.charCodeAt(i))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(i++,n+=4);return n+1}(this.serializerId),!this.serializer){var o=C(this.serializerId);this.serializer=new o}n.length>r&&this.serializer.handshake&&this.serializer.handshake(n,{offset:r}),this.hasJoined=!0,this.onJoin.invoke(),this.connection.send([e.Protocol.JOIN_ROOM])}else if(i===e.Protocol.ERROR){var s={offset:1},a=D.decode.number(n,s),f=D.decode.string(n,s);this.onError.invoke(a,f)}else if(i===e.Protocol.LEAVE_ROOM)this.leave();else if(i===e.Protocol.ROOM_DATA_SCHEMA){var h={offset:1};(f=new(u=this.serializer.getState().constructor._context.get(D.decode.number(n,h)))).decode(n,h),this.dispatchMessage(u,f)}else if(i===e.Protocol.ROOM_STATE)n.shift(),this.setState(n);else if(i===e.Protocol.ROOM_STATE_PATCH)n.shift(),this.patch(n);else if(i===e.Protocol.ROOM_DATA){var c={offset:1},u=D.decode.stringCheck(n,c)?D.decode.string(n,c):D.decode.number(n,c);f=n.length>c.offset?function(e,t){void 0===t&&(t=0);var n=new _(e,t),i=n._parse();if(n._offset!==e.byteLength)throw new Error(e.byteLength-n._offset+" trailing bytes");return i}(t.data,c.offset):void 0;this.dispatchMessage(u,f)}},t.prototype.setState=function(e){this.serializer.setState(e),this.onStateChange.invoke(this.serializer.getState())},t.prototype.patch=function(e){this.serializer.patch(e),this.onStateChange.invoke(this.serializer.getState())},t.prototype.dispatchMessage=function(e,t){var n=this.getMessageHandlerKey(e);this.onMessageHandlers.events[n]?this.onMessageHandlers.emit(n,t):this.onMessageHandlers.events["*"]?this.onMessageHandlers.emit("*",e,t):console.warn("onMessage not registered for type '"+e+"'.")},t.prototype.destroy=function(){this.serializer&&this.serializer.teardown()},t.prototype.getMessageHandlerKey=function(e){switch(typeof e){case"function":return"$"+e._typeid;case"string":return e;case"number":return"i"+e;default:throw new Error("invalid message type.")}},t}();function k(){return N||(N="undefined"!=typeof cc&&cc.sys&&cc.sys.localStorage?cc.sys.localStorage:"undefined"!=typeof window&&window.localStorage?window.localStorage:{cache:{},setItem:function(e,t){this.cache[e]=t},getItem:function(e){this.cache[e]},removeItem:function(e){delete this.cache[e]}}),N}var j,U="colyseus-auth-token";e.Platform=void 0,(j=e.Platform||(e.Platform={})).ios="ios",j.android="android";var L,F=function(){function e(e){var t,n,i,r=this;this._id=void 0,this.username=void 0,this.displayName=void 0,this.avatarUrl=void 0,this.isAnonymous=void 0,this.email=void 0,this.lang=void 0,this.location=void 0,this.timezone=void 0,this.metadata=void 0,this.devices=void 0,this.facebookId=void 0,this.twitterId=void 0,this.googleId=void 0,this.gameCenterId=void 0,this.steamId=void 0,this.friendIds=void 0,this.blockedUserIds=void 0,this.createdAt=void 0,this.updatedAt=void 0,this.token=void 0,this.endpoint=e.replace("ws","http"),t=U,n=function(e){return r.token=e},i=k().getItem(t),"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return n(e)})):n(i)}return Object.defineProperty(e.prototype,"hasToken",{get:function(){return!!this.token},enumerable:!1,configurable:!0}),e.prototype.login=function(e){return void 0===e&&(e={}),i(this,void 0,void 0,(function(){var t,n,i;return r(this,(function(r){switch(r.label){case 0:return t=Object.assign({},e),this.hasToken&&(t.token=this.token),[4,this.request("post","/auth",t)];case 1:for(i in n=r.sent(),this.token=n.token,o=U,s=this.token,k().setItem(o,s),n)this.hasOwnProperty(i)&&(this[i]=n[i]);return this.registerPingService(),[2,this]}var o,s}))}))},e.prototype.save=function(){return i(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.request("put","/auth",{},{username:this.username,displayName:this.displayName,avatarUrl:this.avatarUrl,lang:this.lang,location:this.location,timezone:this.timezone})];case 1:return e.sent(),[2,this]}}))}))},e.prototype.getFriends=function(){return i(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.request("get","/friends/all")];case 1:return[2,e.sent()]}}))}))},e.prototype.getOnlineFriends=function(){return i(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.request("get","/friends/online")];case 1:return[2,e.sent()]}}))}))},e.prototype.getFriendRequests=function(){return i(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.request("get","/friends/requests")];case 1:return[2,e.sent()]}}))}))},e.prototype.sendFriendRequest=function(e){return i(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.request("post","/friends/requests",{userId:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.acceptFriendRequest=function(e){return i(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.request("put","/friends/requests",{userId:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.declineFriendRequest=function(e){return i(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.request("del","/friends/requests",{userId:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.blockUser=function(e){return i(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.request("post","/friends/block",{userId:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.unblockUser=function(e){return i(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.request("put","/friends/block",{userId:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.request=function(e,t,n,o,s){return void 0===n&&(n={}),void 0===s&&(s={}),i(this,void 0,void 0,(function(){var i,a,f,h;return r(this,(function(r){switch(r.label){case 0:for(a in s.Accept="application/json",this.hasToken&&(s.Authorization="Bearer "+this.token),i=[],n)i.push(a+"="+n[a]);return f=i.length>0?"?"+i.join("&"):"",h={headers:s},o&&(h.body=o),[4,g[e](""+this.endpoint+t+f,h)];case 1:return[2,r.sent().data]}}))}))},e.prototype.logout=function(){var e;this.token=void 0,e=U,k().removeItem(e),this.unregisterPingService()},e.prototype.registerPingService=function(e){var t=this;void 0===e&&(e=15e3),this.unregisterPingService(),this.keepOnlineInterval=setInterval((function(){return t.request("get","/auth")}),e)},e.prototype.unregisterPingService=function(){clearInterval(this.keepOnlineInterval)},e}(),H=function(e){function t(n,i){var r=e.call(this,n)||this;return r.code=i,Object.setPrototypeOf(r,t.prototype),r}return n(t,e),t}(Error),B="undefined"!=typeof window&&void 0!==(null===(L=null===window||void 0===window?void 0:window.location)||void 0===L?void 0:L.hostname)?window.location.protocol.replace("http","ws")+"//"+window.location.hostname+(window.location.port&&":"+window.location.port):"ws://127.0.0.1:2567",z=function(){function e(e){void 0===e&&(e=B),this.endpoint=e}return Object.defineProperty(e.prototype,"auth",{get:function(){return this._auth||(this._auth=new F(this.endpoint)),this._auth},enumerable:!1,configurable:!0}),e.prototype.joinOrCreate=function(e,t,n){return void 0===t&&(t={}),i(this,void 0,void 0,(function(){return r(this,(function(i){switch(i.label){case 0:return[4,this.createMatchMakeRequest("joinOrCreate",e,t,n)];case 1:return[2,i.sent()]}}))}))},e.prototype.create=function(e,t,n){return void 0===t&&(t={}),i(this,void 0,void 0,(function(){return r(this,(function(i){switch(i.label){case 0:return[4,this.createMatchMakeRequest("create",e,t,n)];case 1:return[2,i.sent()]}}))}))},e.prototype.join=function(e,t,n){return void 0===t&&(t={}),i(this,void 0,void 0,(function(){return r(this,(function(i){switch(i.label){case 0:return[4,this.createMatchMakeRequest("join",e,t,n)];case 1:return[2,i.sent()]}}))}))},e.prototype.joinById=function(e,t,n){return void 0===t&&(t={}),i(this,void 0,void 0,(function(){return r(this,(function(i){switch(i.label){case 0:return[4,this.createMatchMakeRequest("joinById",e,t,n)];case 1:return[2,i.sent()]}}))}))},e.prototype.reconnect=function(e,t,n){return i(this,void 0,void 0,(function(){return r(this,(function(i){switch(i.label){case 0:return[4,this.createMatchMakeRequest("joinById",e,{sessionId:t},n)];case 1:return[2,i.sent()]}}))}))},e.prototype.getAvailableRooms=function(e){return void 0===e&&(e=""),i(this,void 0,void 0,(function(){var t;return r(this,(function(n){switch(n.label){case 0:return t=this.endpoint.replace("ws","http")+"/matchmake/"+e,[4,u(t,{headers:{Accept:"application/json"}})];case 1:return[2,n.sent().data]}}))}))},e.prototype.consumeSeatReservation=function(e,t){return i(this,void 0,void 0,(function(){var n;return r(this,(function(i){return(n=this.createRoom(e.room.name,t)).id=e.room.roomId,n.sessionId=e.sessionId,n.connect(this.buildEndpoint(e.room,{sessionId:n.sessionId})),[2,new Promise((function(e,t){var i=function(e,n){return t(new m(e,n))};n.onError.once(i),n.onJoin.once((function(){n.onError.remove(i),e(n)}))}))]}))}))},e.prototype.createMatchMakeRequest=function(e,t,n,o){return void 0===n&&(n={}),i(this,void 0,void 0,(function(){var i,s;return r(this,(function(r){switch(r.label){case 0:return i=this.endpoint.replace("ws","http")+"/matchmake/"+e+"/"+t,this._auth&&this._auth.hasToken&&(n.token=this._auth.token),[4,p(i,{headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)})];case 1:if((s=r.sent().data).error)throw new H(s.error,s.code);return[2,this.consumeSeatReservation(s,o)]}}))}))},e.prototype.createRoom=function(e,t){return new M(e,t)},e.prototype.buildEndpoint=function(e,t){void 0===t&&(t={});var n=[];for(var i in t)t.hasOwnProperty(i)&&n.push(i+"="+t[i]);return this.endpoint+"/"+e.processId+"/"+e.roomId+"?"+n.join("&")},e}(),V=function(){function e(){}return e.prototype.setState=function(e){this.state.decode(e)},e.prototype.getState=function(){return this.state},e.prototype.patch=function(e){this.state.decode(e)},e.prototype.teardown=function(){var e,t;null===(t=null===(e=this.state)||void 0===e?void 0:e.$changes)||void 0===t||t.root.clearRefs()},e.prototype.handshake=function(e,t){this.state?(new D.Reflection).decode(e,t):this.state=D.Reflection.decode(e,t)},e}(),q=function(){function e(){}return e.prototype.setState=function(e){},e.prototype.getState=function(){return null},e.prototype.patch=function(e){},e.prototype.teardown=function(){},e.prototype.handshake=function(e){},e}();T("schema",V),T("none",q),e.Auth=F,e.Client=z,e.Room=M,e.SchemaSerializer=V,e.registerSerializer=T,Object.defineProperty(e,"__esModule",{value:!0})})),e("default",i.exports),i.exports.Protocol,i.exports.ErrorCode,i.exports.OPERATION,i.exports.ArraySchema,i.exports.CollectionSchema,i.exports.Context,i.exports.MapSchema,i.exports.Reflection,i.exports.ReflectionField,i.exports.ReflectionType,i.exports.Schema,i.exports.SchemaDefinition,i.exports.SetSchema,i.exports.decode,i.exports.defineTypes,i.exports.deprecated,i.exports.dumpChanges,i.exports.encode,i.exports.filter,i.exports.filterChildren,i.exports.hasFilter,i.exports.registerType,i.exports.type,i.exports.__esModule,i.exports.Platform,i.exports.Auth,i.exports.Client,i.exports.Room,i.exports.SchemaSerializer,i.exports.registerSerializer}),{})}}}));

System.register("chunks:///_virtual/colyseus.mjs_cjs=&original=.js",["./colyseus.js","./cjs-loader.mjs"],(function(e,s){"use strict";var t,r;return{setters:[function(s){t=s.__cjsMetaURL;var r={};r.__cjsMetaURL=s.__cjsMetaURL,r.default=s.default,e(r)},function(e){r=e.default}],execute:function(){t||r.throwInvalidWrapper("./colyseus.js",s.meta.url),r.require(t)}}}));

System.register("chunks:///_virtual/DefaultHttpClient.js",["./cjs-loader.mjs","./Errors.js","./FetchHttpClient.js","./HttpClient.js","./Utils.js","./XhrHttpClient.js"],(function(t,e){"use strict";var n,r,o,i,s,u;return{setters:[function(t){n=t.default},function(t){r=t.__cjsMetaURL},function(t){o=t.__cjsMetaURL},function(t){i=t.__cjsMetaURL},function(t){s=t.__cjsMetaURL},function(t){u=t.__cjsMetaURL}],execute:function(){function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var c=t("__cjsMetaURL",e.meta.url);n.define(c,(function(t,e,n,r,o){Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultHttpClient=void 0;var i=e("./Errors"),s=e("./FetchHttpClient"),u=e("./HttpClient"),c=e("./Utils"),p=e("./XhrHttpClient"),f=function(t){var e,n;function r(e){var n;if(n=t.call(this)||this,"undefined"!=typeof fetch||c.Platform.isNode)n._httpClient=new s.FetchHttpClient(e);else{if("undefined"==typeof XMLHttpRequest)throw new Error("No usable HttpClient found.");n._httpClient=new p.XhrHttpClient(e)}return n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,l(e,n);var o=r.prototype;return o.send=function(t){return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new i.AbortError):t.method?t.url?this._httpClient.send(t):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},o.getCookieString=function(t){return this._httpClient.getCookieString(t)},r}(u.HttpClient);t.DefaultHttpClient=f,n.exports,n.exports.__esModule,n.exports.DefaultHttpClient}),(function(){return{"./Errors":r,"./FetchHttpClient":o,"./HttpClient":i,"./Utils":s,"./XhrHttpClient":u}}))}}}));

System.register("chunks:///_virtual/DefaultReconnectPolicy.js",["./cjs-loader.mjs"],(function(e,t){"use strict";var n;return{setters:[function(e){n=e.default}],execute:function(){var o=e("__cjsMetaURL",t.meta.url);n.define(o,(function(e,t,n,o,r){Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultReconnectPolicy=void 0;var c=[0,2e3,1e4,3e4,null],u=function(){function e(e){this._retryDelays=void 0!==e?[].concat(e,[null]):c}return e.prototype.nextRetryDelayInMilliseconds=function(e){return this._retryDelays[e.previousRetryCount]},e}();e.DefaultReconnectPolicy=u,n.exports,n.exports.__esModule,n.exports.DefaultReconnectPolicy}),{})}}}));

System.register("chunks:///_virtual/Errors.js",["./cjs-loader.mjs"],(function(r,t){"use strict";var o;return{setters:[function(r){o=r.default}],execute:function(){function e(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,u(r,t)}function n(r){var t="function"==typeof Map?new Map:void 0;return(n=function(r){if(null===r||(o=r,-1===Function.toString.call(o).indexOf("[native code]")))return r;var o;if("function"!=typeof r)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(r))return t.get(r);t.set(r,e)}function e(){return i(r,arguments,c(this).constructor)}return e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),u(e,r)})(r)}function i(r,t,o){return(i=s()?Reflect.construct.bind():function(r,t,o){var e=[null];e.push.apply(e,t);var n=new(Function.bind.apply(r,e));return o&&u(n,o.prototype),n}).apply(null,arguments)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(r){return!1}}function u(r,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,t){return r.__proto__=t,r})(r,t)}function c(r){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}var a=r("__cjsMetaURL",t.meta.url);o.define(a,(function(r,t,o,i,s){Object.defineProperty(r,"__esModule",{value:!0}),r.AggregateErrors=r.FailedToNegotiateWithServerError=r.FailedToStartTransportError=r.DisabledTransportError=r.UnsupportedTransportError=r.AbortError=r.TimeoutError=r.HttpError=void 0;var u=function(r){function t(o,e){var n,i=(this instanceof t?this.constructor:void 0).prototype;return(n=r.call(this,o+": Status code '"+e+"'")||this).statusCode=e,n.__proto__=i,n}return e(t,r),t}(n(Error));r.HttpError=u;var c=function(r){function t(o){var e;void 0===o&&(o="A timeout occurred.");var n=(this instanceof t?this.constructor:void 0).prototype;return(e=r.call(this,o)||this).__proto__=n,e}return e(t,r),t}(n(Error));r.TimeoutError=c;var a=function(r){function t(o){var e;void 0===o&&(o="An abort occurred.");var n=(this instanceof t?this.constructor:void 0).prototype;return(e=r.call(this,o)||this).__proto__=n,e}return e(t,r),t}(n(Error));r.AbortError=a;var p=function(r){function t(o,e){var n,i=(this instanceof t?this.constructor:void 0).prototype;return(n=r.call(this,o)||this).transport=e,n.errorType="UnsupportedTransportError",n.__proto__=i,n}return e(t,r),t}(n(Error));r.UnsupportedTransportError=p;var f=function(r){function t(o,e){var n,i=(this instanceof t?this.constructor:void 0).prototype;return(n=r.call(this,o)||this).transport=e,n.errorType="DisabledTransportError",n.__proto__=i,n}return e(t,r),t}(n(Error));r.DisabledTransportError=f;var l=function(r){function t(o,e){var n,i=(this instanceof t?this.constructor:void 0).prototype;return(n=r.call(this,o)||this).transport=e,n.errorType="FailedToStartTransportError",n.__proto__=i,n}return e(t,r),t}(n(Error));r.FailedToStartTransportError=l;var d=function(r){function t(o){var e,n=(this instanceof t?this.constructor:void 0).prototype;return(e=r.call(this,o)||this).errorType="FailedToNegotiateWithServerError",e.__proto__=n,e}return e(t,r),t}(n(Error));r.FailedToNegotiateWithServerError=d;var _=function(r){function t(o,e){var n,i=(this instanceof t?this.constructor:void 0).prototype;return(n=r.call(this,o)||this).innerErrors=e,n.__proto__=i,n}return e(t,r),t}(n(Error));r.AggregateErrors=_,o.exports,o.exports.__esModule,o.exports.AggregateErrors,o.exports.FailedToNegotiateWithServerError,o.exports.FailedToStartTransportError,o.exports.DisabledTransportError,o.exports.UnsupportedTransportError,o.exports.AbortError,o.exports.TimeoutError,o.exports.HttpError}),{})}}}));

System.register("chunks:///_virtual/FetchHttpClient.js",["./cjs-loader.mjs","./Errors.js","./HttpClient.js","./ILogger.js","./Utils.js"],(function(t,e){"use strict";var r,n,o,i,a;return{setters:[function(t){r=t.default},function(t){n=t.__cjsMetaURL},function(t){o=t.__cjsMetaURL},function(t){i=t.__cjsMetaURL},function(t){a=t.__cjsMetaURL}],execute:function(){function c(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
c=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function f(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new k(o||[]);return n(a,"_invoke",{value:x(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var h={};function p(){}function d(){}function v(){}var y={};s(y,i,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(T([])));m&&m!==e&&r.call(m,i)&&(y=m);var w=v.prototype=p.prototype=Object.create(y);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function o(n,i,a,c){var u=l(t[n],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=L(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function L(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,L(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return d.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},b(_.prototype),s(_.prototype,a,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(w),s(w,u,"Generator"),s(w,i,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=T,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:T(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function u(){return(u=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function s(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var l=t("__cjsMetaURL",e.meta.url);r.define(l,(function(t,e,r,n,o){Object.defineProperty(t,"__esModule",{value:!0}),t.FetchHttpClient=void 0;var i=e("./Errors"),a=e("./HttpClient"),l=e("./ILogger"),h=e("./Utils"),p=function(t){var r,n;function o(r){var n;if((n=t.call(this)||this)._logger=r,"undefined"==typeof fetch){var o="function"==typeof __webpack_require__?__non_webpack_require__:e;n._jar=new(o("tough-cookie").CookieJar),n._fetchType=o("node-fetch"),n._fetchType=o("fetch-cookie")(n._fetchType,n._jar)}else n._fetchType=fetch.bind(h.getGlobalThis());if("undefined"==typeof AbortController){var i="function"==typeof __webpack_require__?__non_webpack_require__:e;n._abortControllerType=i("abort-controller")}else n._abortControllerType=AbortController;return n}n=t,(r=o).prototype=Object.create(n.prototype),r.prototype.constructor=r,f(r,n);var p=o.prototype;return p.send=function(){var t,e=(t=c().mark((function t(e){var r,n,o,s,f,p,v,y,g=this;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.abortSignal||!e.abortSignal.aborted){t.next=2;break}throw new i.AbortError;case 2:if(e.method){t.next=4;break}throw new Error("No method defined.");case 4:if(e.url){t.next=6;break}throw new Error("No url defined.");case 6:return r=new this._abortControllerType,e.abortSignal&&(e.abortSignal.onabort=function(){r.abort(),n=new i.AbortError}),o=null,e.timeout&&(s=e.timeout,o=setTimeout((function(){r.abort(),g._logger.log(l.LogLevel.Warning,"Timeout from HTTP request."),n=new i.TimeoutError}),s)),""===e.content&&(e.content=void 0),e.content&&(e.headers=e.headers||{},h.isArrayBuffer(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8"),t.prev=12,t.next=15,this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:!0===e.withCredentials?"include":"same-origin",headers:u({"X-Requested-With":"XMLHttpRequest"},e.headers),method:e.method,mode:"cors",redirect:"follow",signal:r.signal});case 15:f=t.sent,t.next=24;break;case 18:if(t.prev=18,t.t0=t.catch(12),!n){t.next=22;break}throw n;case 22:throw this._logger.log(l.LogLevel.Warning,"Error from HTTP request. "+t.t0+"."),t.t0;case 24:return t.prev=24,o&&clearTimeout(o),e.abortSignal&&(e.abortSignal.onabort=null),t.finish(24);case 28:if(f.ok){t.next=33;break}return t.next=31,d(f,"text");case 31:throw p=t.sent,new i.HttpError(p||f.statusText,f.status);case 33:return v=d(f,e.responseType),t.next=36,v;case 36:return y=t.sent,t.abrupt("return",new a.HttpResponse(f.status,f.statusText,y));case 38:case"end":return t.stop()}}),t,this,[[12,18,24,28]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){s(i,n,o,a,c,"next",t)}function c(t){s(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}(),p.getCookieString=function(t){var e="";return h.Platform.isNode&&this._jar&&this._jar.getCookies(t,(function(t,r){return e=r.join("; ")})),e},o}(a.HttpClient);function d(t,e){var r;switch(e){case"arraybuffer":r=t.arrayBuffer();break;case"text":r=t.text();break;case"blob":case"document":case"json":throw new Error(e+" is not supported.");default:r=t.text()}return r}t.FetchHttpClient=p,r.exports,r.exports.__esModule,r.exports.FetchHttpClient}),(function(){return{"./Errors":n,"./HttpClient":o,"./ILogger":i,"./Utils":a}}))}}}));

System.register("chunks:///_virtual/HandshakeProtocol.js",["./cjs-loader.mjs","./TextMessageFormat.js","./Utils.js"],(function(e,r){"use strict";var t,s,a;return{setters:[function(e){t=e.default},function(e){s=e.__cjsMetaURL},function(e){a=e.__cjsMetaURL}],execute:function(){var o=e("__cjsMetaURL",r.meta.url);t.define(o,(function(e,r,t,s,a){Object.defineProperty(e,"__esModule",{value:!0}),e.HandshakeProtocol=void 0;var o=r("./TextMessageFormat"),n=r("./Utils"),i=function(){function e(){}var r=e.prototype;return r.writeHandshakeRequest=function(e){return o.TextMessageFormat.write(JSON.stringify(e))},r.parseHandshakeResponse=function(e){var r,t;if(n.isArrayBuffer(e)){var s=new Uint8Array(e),a=s.indexOf(o.TextMessageFormat.RecordSeparatorCode);if(-1===a)throw new Error("Message is incomplete.");var i=a+1;r=String.fromCharCode.apply(null,Array.prototype.slice.call(s.slice(0,i))),t=s.byteLength>i?s.slice(i).buffer:null}else{var u=e,c=u.indexOf(o.TextMessageFormat.RecordSeparator);if(-1===c)throw new Error("Message is incomplete.");var l=c+1;r=u.substring(0,l),t=u.length>l?u.substring(l):null}var f=o.TextMessageFormat.parse(r),d=JSON.parse(f[0]);if(d.type)throw new Error("Expected a handshake response from the server.");return[t,d]},e}();e.HandshakeProtocol=i,t.exports,t.exports.__esModule,t.exports.HandshakeProtocol}),(function(){return{"./TextMessageFormat":s,"./Utils":a}}))}}}));

System.register("chunks:///_virtual/HeaderNames.js",["./cjs-loader.mjs"],(function(e,t){"use strict";var r;return{setters:[function(e){r=e.default}],execute:function(){var o=e("__cjsMetaURL",t.meta.url);r.define(o,(function(e,t,r,o,s){Object.defineProperty(e,"__esModule",{value:!0}),e.HeaderNames=void 0;var a=function(){};e.HeaderNames=a,a.Authorization="Authorization",a.Cookie="Cookie",r.exports,r.exports.__esModule,r.exports.HeaderNames}),{})}}}));

System.register("chunks:///_virtual/HttpClient.js",["./cjs-loader.mjs"],(function(t,e){"use strict";var n;return{setters:[function(t){n=t.default}],execute:function(){function r(){return(r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var s=t("__cjsMetaURL",e.meta.url);n.define(s,(function(t,e,n,s,o){Object.defineProperty(t,"__esModule",{value:!0}),t.HttpClient=t.HttpResponse=void 0;t.HttpResponse=function(t,e,n){this.statusCode=t,this.statusText=e,this.content=n};var i=function(){function t(){}var e=t.prototype;return e.get=function(t,e){return this.send(r({},e,{method:"GET",url:t}))},e.post=function(t,e){return this.send(r({},e,{method:"POST",url:t}))},e.delete=function(t,e){return this.send(r({},e,{method:"DELETE",url:t}))},e.getCookieString=function(t){return""},t}();t.HttpClient=i,n.exports,n.exports.__esModule,n.exports.HttpClient,n.exports.HttpResponse}),{})}}}));

System.register("chunks:///_virtual/HttpConnection.js",["./cjs-loader.mjs","./AccessTokenHttpClient.js","./DefaultHttpClient.js","./Errors.js","./ILogger.js","./ITransport.js","./LongPollingTransport.js","./ServerSentEventsTransport.js","./Utils.js","./WebSocketTransport.js"],(function(t,e){"use strict";var r,n,o,i,s,a,c,u,p,h;return{setters:[function(t){r=t.default},function(t){n=t.__cjsMetaURL},function(t){o=t.__cjsMetaURL},function(t){i=t.__cjsMetaURL},function(t){s=t.__cjsMetaURL},function(t){a=t.__cjsMetaURL},function(t){c=t.__cjsMetaURL},function(t){u=t.__cjsMetaURL},function(t){p=t.__cjsMetaURL},function(t){h=t.__cjsMetaURL}],execute:function(){function l(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function g(){return(g=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function d(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
d=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,o){var i=e&&e.prototype instanceof l?e:l,s=Object.create(i.prototype),a=new k(o||[]);return n(s,"_invoke",{value:T(t,r,a)}),s}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h={};function l(){}function f(){}function g(){}var v={};c(v,i,(function(){return this}));var _=Object.getPrototypeOf,b=_&&_(_(E([])));b&&b!==e&&r.call(b,i)&&(v=b);var y=g.prototype=l.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){function o(n,i,s,a){var c=p(t[n],t,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,s,a)}),(function(t){o("throw",t,s,a)})):e.resolve(h).then((function(t){u.value=t,s(u)}),(function(t){return o("throw",t,s,a)}))}a(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function T(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return C()}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var a=L(s,r);if(a){if(a===h)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=p(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function L(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,L(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=p(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return f.prototype=g,n(y,"constructor",{value:g,configurable:!0}),n(g,"constructor",{value:f,configurable:!0}),f.displayName=c(g,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},w(m.prototype),c(m.prototype,s,(function(){return this})),t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var s=new m(u(e,r,n,o),i);return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},w(y),c(y,a,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return s.type="throw",s.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function v(t,e,r,n,o,i,s){try{var a=t[i](s),c=a.value}catch(t){return void r(t)}a.done?e(c):Promise.resolve(c).then(n,o)}function _(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function s(t){v(i,n,o,s,a,"next",t)}function a(t){v(i,n,o,s,a,"throw",t)}s(void 0)}))}}var b=t("__cjsMetaURL",e.meta.url);r.define(b,(function(t,e,r,n,o){Object.defineProperty(t,"__esModule",{value:!0}),t.TransportSendQueue=t.HttpConnection=void 0;var i=e("./AccessTokenHttpClient"),s=e("./DefaultHttpClient"),a=e("./Errors"),c=e("./ILogger"),u=e("./ITransport"),p=e("./LongPollingTransport"),h=e("./ServerSentEventsTransport"),f=e("./Utils"),v=e("./WebSocketTransport"),b=function(){function t(t,r){if(void 0===r&&(r={}),this._stopPromiseResolver=function(){},this.features={},this._negotiateVersion=1,f.Arg.isRequired(t,"url"),this._logger=f.createLogger(r.logger),this.baseUrl=this._resolveUrl(t),(r=r||{}).logMessageContent=void 0!==r.logMessageContent&&r.logMessageContent,"boolean"!=typeof r.withCredentials&&void 0!==r.withCredentials)throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");r.withCredentials=void 0===r.withCredentials||r.withCredentials,r.timeout=void 0===r.timeout?1e5:r.timeout;var n=null,o=null;if(f.Platform.isNode&&void 0!==e){var a="function"==typeof __webpack_require__?__non_webpack_require__:e;n=a("ws"),o=a("eventsource")}f.Platform.isNode||"undefined"==typeof WebSocket||r.WebSocket?f.Platform.isNode&&!r.WebSocket&&n&&(r.WebSocket=n):r.WebSocket=WebSocket,f.Platform.isNode||"undefined"==typeof EventSource||r.EventSource?f.Platform.isNode&&!r.EventSource&&void 0!==o&&(r.EventSource=o):r.EventSource=EventSource,this._httpClient=new i.AccessTokenHttpClient(r.httpClient||new s.DefaultHttpClient(this._logger),r.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=r,this.onreceive=null,this.onclose=null}var r=t.prototype;return r.start=function(){var t=_(d().mark((function t(e){var r,n;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=e||u.TransferFormat.Binary,f.Arg.isIn(e,u.TransferFormat,"transferFormat"),this._logger.log(c.LogLevel.Debug,"Starting connection with transfer format '"+u.TransferFormat[e]+"'."),"Disconnected"===this._connectionState){t.next=5;break}return t.abrupt("return",Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state.")));case 5:return this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),t.next=9,this._startInternalPromise;case 9:if("Disconnecting"!==this._connectionState){t.next=17;break}return r="Failed to start the HttpConnection before stop() was called.",this._logger.log(c.LogLevel.Error,r),t.next=14,this._stopPromise;case 14:return t.abrupt("return",Promise.reject(new a.AbortError(r)));case 17:if("Connected"===this._connectionState){t.next=21;break}return n="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!",this._logger.log(c.LogLevel.Error,n),t.abrupt("return",Promise.reject(new a.AbortError(n)));case 21:this._connectionStarted=!0;case 22:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.send=function(t){return"Connected"!==this._connectionState?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new y(this.transport)),this._sendQueue.send(t))},r.stop=function(){var t=_(d().mark((function t(e){var r=this;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Disconnected"!==this._connectionState){t.next=3;break}return this._logger.log(c.LogLevel.Debug,"Call to HttpConnection.stop("+e+") ignored because the connection is already in the disconnected state."),t.abrupt("return",Promise.resolve());case 3:if("Disconnecting"!==this._connectionState){t.next=6;break}return this._logger.log(c.LogLevel.Debug,"Call to HttpConnection.stop("+e+") ignored because the connection is already in the disconnecting state."),t.abrupt("return",this._stopPromise);case 6:return this._connectionState="Disconnecting",this._stopPromise=new Promise((function(t){r._stopPromiseResolver=t})),t.next=10,this._stopInternal(e);case 10:return t.next=12,this._stopPromise;case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r._stopInternal=function(){var t=_(d().mark((function t(e){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._stopError=e,t.prev=1,t.next=4,this._startInternalPromise;case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:if(!this.transport){t.next=21;break}return t.prev=9,t.next=12,this.transport.stop();case 12:t.next=18;break;case 14:t.prev=14,t.t1=t.catch(9),this._logger.log(c.LogLevel.Error,"HttpConnection.transport.stop() threw error '"+t.t1+"'."),this._stopConnection();case 18:this.transport=void 0,t.next=22;break;case 21:this._logger.log(c.LogLevel.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.");case 22:case"end":return t.stop()}}),t,this,[[1,6],[9,14]])})));return function(e){return t.apply(this,arguments)}}(),r._startInternal=function(){var t=_(d().mark((function t(e){var r,n,o,i=this;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.baseUrl,this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory,t.prev=3,!this._options.skipNegotiation){t.next=14;break}if(this._options.transport!==u.HttpTransportType.WebSockets){t.next=11;break}return this.transport=this._constructTransport(u.HttpTransportType.WebSockets),t.next=9,this._startTransport(r,e);case 9:t.next=12;break;case 11:throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");case 12:t.next=33;break;case 14:n=null,o=0;case 16:return t.next=18,this._getNegotiationResponse(r);case 18:if(n=t.sent,"Disconnecting"!==this._connectionState&&"Disconnected"!==this._connectionState){t.next=21;break}throw new a.AbortError("The connection was stopped during negotiation.");case 21:if(!n.error){t.next=23;break}throw new Error(n.error);case 23:if(!n.ProtocolVersion){t.next=25;break}throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");case 25:n.url&&(r=n.url),n.accessToken&&function(){var t=n.accessToken;i._accessTokenFactory=function(){return t},i._httpClient._accessToken=t,i._httpClient._accessTokenFactory=void 0}(),o++;case 28:if(n.url&&o<100){t.next=16;break}case 29:if(100!==o||!n.url){t.next=31;break}throw new Error("Negotiate redirection limit exceeded.");case 31:return t.next=33,this._createTransport(r,this._options.transport,n,e);case 33:this.transport instanceof p.LongPollingTransport&&(this.features.inherentKeepAlive=!0),"Connecting"===this._connectionState&&(this._logger.log(c.LogLevel.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected"),t.next=44;break;case 37:return t.prev=37,t.t0=t.catch(3),this._logger.log(c.LogLevel.Error,"Failed to start the connection: "+t.t0),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),t.abrupt("return",Promise.reject(t.t0));case 44:case"end":return t.stop()}}),t,this,[[3,37]])})));return function(e){return t.apply(this,arguments)}}(),r._getNegotiationResponse=function(){var t=_(d().mark((function t(e){var r,n,o,i,s,u,p,h;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={},n=f.getUserAgentHeader(),o=n[0],i=n[1],r[o]=i,s=this._resolveNegotiateUrl(e),this._logger.log(c.LogLevel.Debug,"Sending negotiation request: "+s+"."),t.prev=5,t.next=8,this._httpClient.post(s,{content:"",headers:g({},r,this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials});case 8:if(200===(u=t.sent).statusCode){t.next=11;break}return t.abrupt("return",Promise.reject(new Error("Unexpected status code returned from negotiate '"+u.statusCode+"'")));case 11:return(!(p=JSON.parse(u.content)).negotiateVersion||p.negotiateVersion<1)&&(p.connectionToken=p.connectionId),t.abrupt("return",p);case 16:return t.prev=16,t.t0=t.catch(5),h="Failed to complete negotiation with the server: "+t.t0,t.t0 instanceof a.HttpError&&404===t.t0.statusCode&&(h+=" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(c.LogLevel.Error,h),t.abrupt("return",Promise.reject(new a.FailedToNegotiateWithServerError(h)));case 22:case"end":return t.stop()}}),t,this,[[5,16]])})));return function(e){return t.apply(this,arguments)}}(),r._createConnectUrl=function(t,e){return e?t+(-1===t.indexOf("?")?"?":"&")+"id="+e:t},r._createTransport=function(){var t=_(d().mark((function t(e,r,n,o){var i,s,p,h,f,g,v,_,b;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this._createConnectUrl(e,n.connectionToken),!this._isITransport(r)){t.next=8;break}return this._logger.log(c.LogLevel.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=r,t.next=6,this._startTransport(i,o);case 6:return this.connectionId=n.connectionId,t.abrupt("return");case 8:s=[],p=n.availableTransports||[],h=n,f=l(p);case 12:if((g=f()).done){t.next=51;break}if(v=g.value,!((_=this._resolveTransportOrError(v,r,o))instanceof Error)){t.next=20;break}s.push(v.transport+" failed:"),s.push(_),t.next=49;break;case 20:if(!this._isITransport(_)){t.next=49;break}if(this.transport=_,h){t.next=33;break}return t.prev=23,t.next=26,this._getNegotiationResponse(e);case 26:h=t.sent,t.next=32;break;case 29:return t.prev=29,t.t0=t.catch(23),t.abrupt("return",Promise.reject(t.t0));case 32:i=this._createConnectUrl(e,h.connectionToken);case 33:return t.prev=33,t.next=36,this._startTransport(i,o);case 36:return this.connectionId=h.connectionId,t.abrupt("return");case 40:if(t.prev=40,t.t1=t.catch(33),this._logger.log(c.LogLevel.Error,"Failed to start the transport '"+v.transport+"': "+t.t1),h=void 0,s.push(new a.FailedToStartTransportError(v.transport+" failed: "+t.t1,u.HttpTransportType[v.transport])),"Connecting"===this._connectionState){t.next=49;break}return b="Failed to select transport before stop() was called.",this._logger.log(c.LogLevel.Debug,b),t.abrupt("return",Promise.reject(new a.AbortError(b)));case 49:t.next=12;break;case 51:if(!(s.length>0)){t.next=53;break}return t.abrupt("return",Promise.reject(new a.AggregateErrors("Unable to connect to the server with any of the available transports. "+s.join(" "),s)));case 53:return t.abrupt("return",Promise.reject(new Error("None of the transports supported by the client are supported by the server.")));case 54:case"end":return t.stop()}}),t,this,[[23,29],[33,40]])})));return function(e,r,n,o){return t.apply(this,arguments)}}(),r._constructTransport=function(t){switch(t){case u.HttpTransportType.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new v.WebSocketTransport(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case u.HttpTransportType.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new h.ServerSentEventsTransport(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case u.HttpTransportType.LongPolling:return new p.LongPollingTransport(this._httpClient,this._logger,this._options);default:throw new Error("Unknown transport: "+t+".")}},r._startTransport=function(t,e){var r=this;return this.transport.onreceive=this.onreceive,this.transport.onclose=function(t){return r._stopConnection(t)},this.transport.connect(t,e)},r._resolveTransportOrError=function(t,e,r){var n=u.HttpTransportType[t.transport];if(null==n)return this._logger.log(c.LogLevel.Debug,"Skipping transport '"+t.transport+"' because it is not supported by this client."),new Error("Skipping transport '"+t.transport+"' because it is not supported by this client.");if(!function(t,e){return!t||0!=(e&t)}(e,n))return this._logger.log(c.LogLevel.Debug,"Skipping transport '"+u.HttpTransportType[n]+"' because it was disabled by the client."),new a.DisabledTransportError("'"+u.HttpTransportType[n]+"' is disabled by the client.",n);if(!(t.transferFormats.map((function(t){return u.TransferFormat[t]})).indexOf(r)>=0))return this._logger.log(c.LogLevel.Debug,"Skipping transport '"+u.HttpTransportType[n]+"' because it does not support the requested transfer format '"+u.TransferFormat[r]+"'."),new Error("'"+u.HttpTransportType[n]+"' does not support "+u.TransferFormat[r]+".");if(n===u.HttpTransportType.WebSockets&&!this._options.WebSocket||n===u.HttpTransportType.ServerSentEvents&&!this._options.EventSource)return this._logger.log(c.LogLevel.Debug,"Skipping transport '"+u.HttpTransportType[n]+"' because it is not supported in your environment.'"),new a.UnsupportedTransportError("'"+u.HttpTransportType[n]+"' is not supported in your environment.",n);this._logger.log(c.LogLevel.Debug,"Selecting transport '"+u.HttpTransportType[n]+"'.");try{return this._constructTransport(n)}catch(t){return t}},r._isITransport=function(t){return t&&"object"==typeof t&&"connect"in t},r._stopConnection=function(t){var e=this;if(this._logger.log(c.LogLevel.Debug,"HttpConnection.stopConnection("+t+") called while in state "+this._connectionState+"."),this.transport=void 0,t=this._stopError||t,this._stopError=void 0,"Disconnected"!==this._connectionState){if("Connecting"===this._connectionState)throw this._logger.log(c.LogLevel.Warning,"Call to HttpConnection.stopConnection("+t+") was ignored because the connection is still in the connecting state."),new Error("HttpConnection.stopConnection("+t+") was called while the connection is still in the connecting state.");if("Disconnecting"===this._connectionState&&this._stopPromiseResolver(),t?this._logger.log(c.LogLevel.Error,"Connection disconnected with error '"+t+"'."):this._logger.log(c.LogLevel.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch((function(t){e._logger.log(c.LogLevel.Error,"TransportSendQueue.stop() threw error '"+t+"'.")})),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(t)}catch(e){this._logger.log(c.LogLevel.Error,"HttpConnection.onclose("+t+") threw error '"+e+"'.")}}}else this._logger.log(c.LogLevel.Debug,"Call to HttpConnection.stopConnection("+t+") was ignored because the connection is already in the disconnected state.")},r._resolveUrl=function(t){if(0===t.lastIndexOf("https://",0)||0===t.lastIndexOf("http://",0))return t;if(!f.Platform.isBrowser)throw new Error("Cannot resolve '"+t+"'.");var e=window.document.createElement("a");return e.href=t,this._logger.log(c.LogLevel.Information,"Normalizing '"+t+"' to '"+e.href+"'."),e.href},r._resolveNegotiateUrl=function(t){var e=t.indexOf("?"),r=t.substring(0,-1===e?t.length:e);return"/"!==r[r.length-1]&&(r+="/"),r+="negotiate",-1===(r+=-1===e?"":t.substring(e)).indexOf("negotiateVersion")&&(r+=-1===e?"?":"&",r+="negotiateVersion="+this._negotiateVersion),r},t}();t.HttpConnection=b;var y=function(){function t(t){this._transport=t,this._buffer=[],this._executing=!0,this._sendBufferedData=new w,this._transportResult=new w,this._sendLoopPromise=this._sendLoop()}var e=t.prototype;return e.send=function(t){return this._bufferData(t),this._transportResult||(this._transportResult=new w),this._transportResult.promise},e.stop=function(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise},e._bufferData=function(t){if(this._buffer.length&&typeof this._buffer[0]!=typeof t)throw new Error("Expected data to be of type "+typeof this._buffer+" but was of type "+typeof t);this._buffer.push(t),this._sendBufferedData.resolve()},e._sendLoop=function(){var e=_(d().mark((function e(){var r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this._sendBufferedData.promise;case 3:if(this._executing){e.next=6;break}return this._transportResult&&this._transportResult.reject("Connection stopped."),e.abrupt("break",22);case 6:return this._sendBufferedData=new w,r=this._transportResult,this._transportResult=void 0,n="string"==typeof this._buffer[0]?this._buffer.join(""):t._concatBuffers(this._buffer),this._buffer.length=0,e.prev=11,e.next=14,this._transport.send(n);case 14:r.resolve(),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(11),r.reject(e.t0);case 20:e.next=0;break;case 22:case"end":return e.stop()}}),e,this,[[11,17]])})));return function(){return e.apply(this,arguments)}}(),t._concatBuffers=function(t){for(var e,r=t.map((function(t){return t.byteLength})).reduce((function(t,e){return t+e})),n=new Uint8Array(r),o=0,i=l(t);!(e=i()).done;){var s=e.value;n.set(new Uint8Array(s),o),o+=s.byteLength}return n.buffer},t}();t.TransportSendQueue=y;var w=function(){function t(){var t=this;this.promise=new Promise((function(e,r){var n;return n=[e,r],t._resolver=n[0],t._rejecter=n[1],n}))}var e=t.prototype;return e.resolve=function(){this._resolver()},e.reject=function(t){this._rejecter(t)},t}();r.exports,r.exports.__esModule,r.exports.TransportSendQueue,r.exports.HttpConnection}),(function(){return{"./AccessTokenHttpClient":n,"./DefaultHttpClient":o,"./Errors":i,"./ILogger":s,"./ITransport":a,"./LongPollingTransport":c,"./ServerSentEventsTransport":u,"./Utils":p,"./WebSocketTransport":h}}))}}}));

System.register("chunks:///_virtual/HubConnection.js",["./cjs-loader.mjs","./HandshakeProtocol.js","./Errors.js","./IHubProtocol.js","./ILogger.js","./Subject.js","./Utils.js"],(function(e,t){"use strict";var n,r,o,i,c,a,s;return{setters:[function(e){n=e.default},function(e){r=e.__cjsMetaURL},function(e){o=e.__cjsMetaURL},function(e){i=e.__cjsMetaURL},function(e){c=e.__cjsMetaURL},function(e){a=e.__cjsMetaURL},function(e){s=e.__cjsMetaURL}],execute:function(){function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
u=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof d?t:d,c=Object.create(i.prototype),a=new C(o||[]);return r(c,"_invoke",{value:L(e,n,a)}),c}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var g={};function d(){}function f(){}function p(){}var v={};s(v,i,(function(){return this}));var _=Object.getPrototypeOf,m=_&&_(_(x([])));m&&m!==t&&n.call(m,i)&&(v=m);var y=p.prototype=d.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(r,i,c,a){var s=h(e[r],e,i);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==typeof u&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){o("next",e,c,a)}),(function(e){o("throw",e,c,a)})):t.resolve(u).then((function(e){l.value=e,c(l)}),(function(e){return o("throw",e,c,a)}))}a(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function L(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return E()}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var a=k(c,n);if(a){if(a===g)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=h(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function k(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method))return g;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=h(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,g;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,g):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function x(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return f.prototype=p,r(y,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,a,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,c,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var c=new w(l(t,n,r,o),i);return e.isGeneratorFunction(n)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},b(y),s(y,a,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=x,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return c.type="throw",c.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var c=i?i.completion:{};return c.type=e,c.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),g}},e}function g(e,t,n,r,o,i,c){try{var a=e[i](c),s=a.value}catch(e){return void n(e)}a.done?t(s):Promise.resolve(s).then(r,o)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function c(e){g(i,r,o,c,a,"next",e)}function a(e){g(i,r,o,c,a,"throw",e)}c(void 0)}))}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=e("__cjsMetaURL",t.meta.url);n.define(p,(function(e,t,n,r,o){Object.defineProperty(e,"__esModule",{value:!0}),e.HubConnection=e.HubConnectionState=void 0;var i,c=t("./HandshakeProtocol"),a=t("./Errors"),s=t("./IHubProtocol"),h=t("./ILogger"),g=t("./Subject"),p=t("./Utils");!function(e){e.Disconnected="Disconnected",e.Connecting="Connecting",e.Connected="Connected",e.Disconnecting="Disconnecting",e.Reconnecting="Reconnecting"}(i=e.HubConnectionState||(e.HubConnectionState={}));var v=function(){function e(e,t,n,r){var o=this;this._nextKeepAlive=0,this._freezeEventListener=function(){o._logger.log(h.LogLevel.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://docs.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},p.Arg.isRequired(e,"connection"),p.Arg.isRequired(t,"logger"),p.Arg.isRequired(n,"protocol"),this.serverTimeoutInMilliseconds=3e4,this.keepAliveIntervalInMilliseconds=15e3,this._logger=t,this._protocol=n,this.connection=e,this._reconnectPolicy=r,this._handshakeProtocol=new c.HandshakeProtocol,this.connection.onreceive=function(e){return o._processIncomingData(e)},this.connection.onclose=function(e){return o._connectionClosed(e)},this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=i.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:s.MessageType.Ping})}e.create=function(t,n,r,o){return new e(t,n,r,o)};var t,n,r,o=e.prototype;return o.start=function(){return this._startPromise=this._startWithStateTransitions(),this._startPromise},o._startWithStateTransitions=function(){var e=d(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._connectionState===i.Disconnected){e.next=2;break}return e.abrupt("return",Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state.")));case 2:return this._connectionState=i.Connecting,this._logger.log(h.LogLevel.Debug,"Starting HubConnection."),e.prev=4,e.next=7,this._startInternal();case 7:p.Platform.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=i.Connected,this._connectionStarted=!0,this._logger.log(h.LogLevel.Debug,"HubConnection connected successfully."),e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(4),this._connectionState=i.Disconnected,this._logger.log(h.LogLevel.Debug,"HubConnection failed to start successfully because of error '"+e.t0+"'."),e.abrupt("return",Promise.reject(e.t0));case 18:case"end":return e.stop()}}),e,this,[[4,13]])})));return function(){return e.apply(this,arguments)}}(),o._startInternal=function(){var e=d(u().mark((function e(){var t,n,r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1,t=new Promise((function(e,t){r._handshakeResolver=e,r._handshakeRejecter=t})),e.next=5,this.connection.start(this._protocol.transferFormat);case 5:return e.prev=5,n={protocol:this._protocol.name,version:this._protocol.version},this._logger.log(h.LogLevel.Debug,"Sending handshake request."),e.next=10,this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(n));case 10:return this._logger.log(h.LogLevel.Information,"Using HubProtocol '"+this._protocol.name+"'."),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),e.next=16,t;case 16:if(!this._stopDuringStartError){e.next=18;break}throw this._stopDuringStartError;case 18:if(this.connection.features.inherentKeepAlive){e.next=21;break}return e.next=21,this._sendMessage(this._cachedPingMessage);case 21:e.next=31;break;case 23:return e.prev=23,e.t0=e.catch(5),this._logger.log(h.LogLevel.Debug,"Hub handshake failed with error '"+e.t0+"' during start(). Stopping HubConnection."),this._cleanupTimeout(),this._cleanupPingTimer(),e.next=30,this.connection.stop(e.t0);case 30:throw e.t0;case 31:case"end":return e.stop()}}),e,this,[[5,23]])})));return function(){return e.apply(this,arguments)}}(),o.stop=function(){var e=d(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._startPromise,this._stopPromise=this._stopInternal(),e.next=4,this._stopPromise;case 4:return e.prev=4,e.next=7,t;case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(4);case 11:case"end":return e.stop()}}),e,this,[[4,9]])})));return function(){return e.apply(this,arguments)}}(),o._stopInternal=function(e){return this._connectionState===i.Disconnected?(this._logger.log(h.LogLevel.Debug,"Call to HubConnection.stop("+e+") ignored because it is already in the disconnected state."),Promise.resolve()):this._connectionState===i.Disconnecting?(this._logger.log(h.LogLevel.Debug,"Call to HttpConnection.stop("+e+") ignored because the connection is already in the disconnecting state."),this._stopPromise):(this._connectionState=i.Disconnecting,this._logger.log(h.LogLevel.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(h.LogLevel.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new a.AbortError("The connection was stopped before the hub handshake could complete."),this.connection.stop(e)))},o.stream=function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i,c=this._replaceStreamingParams(r),a=c[0],l=c[1],h=this._createStreamInvocation(e,r,l),u=new g.Subject;return u.cancelCallback=function(){var e=t._createCancelInvocation(h.invocationId);return delete t._callbacks[h.invocationId],i.then((function(){return t._sendWithProtocol(e)}))},this._callbacks[h.invocationId]=function(e,t){t?u.error(t):e&&(e.type===s.MessageType.Completion?e.error?u.error(new Error(e.error)):u.complete():u.next(e.item))},i=this._sendWithProtocol(h).catch((function(e){u.error(e),delete t._callbacks[h.invocationId]})),this._launchStreams(a,i),u},o._sendMessage=function(e){return this._resetKeepAliveInterval(),this.connection.send(e)},o._sendWithProtocol=function(e){return this._sendMessage(this._protocol.writeMessage(e))},o.send=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=this._replaceStreamingParams(n),i=o[0],c=o[1],a=this._sendWithProtocol(this._createInvocation(e,n,!0,c));return this._launchStreams(i,a),a},o.invoke=function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i=this._replaceStreamingParams(r),c=i[0],a=i[1],l=this._createInvocation(e,r,!1,a),h=new Promise((function(e,n){t._callbacks[l.invocationId]=function(t,r){r?n(r):t&&(t.type===s.MessageType.Completion?t.error?n(new Error(t.error)):e(t.result):n(new Error("Unexpected message type: "+t.type)))};var r=t._sendWithProtocol(l).catch((function(e){n(e),delete t._callbacks[l.invocationId]}));t._launchStreams(c,r)}));return h},o.on=function(e,t){e&&t&&(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),-1===this._methods[e].indexOf(t)&&this._methods[e].push(t))},o.off=function(e,t){if(e){e=e.toLowerCase();var n=this._methods[e];if(n)if(t){var r=n.indexOf(t);-1!==r&&(n.splice(r,1),0===n.length&&delete this._methods[e])}else delete this._methods[e]}},o.onclose=function(e){e&&this._closedCallbacks.push(e)},o.onreconnecting=function(e){e&&this._reconnectingCallbacks.push(e)},o.onreconnected=function(e){e&&this._reconnectedCallbacks.push(e)},o._processIncomingData=function(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e)for(var t,n=l(this._protocol.parseMessages(e,this._logger));!(t=n()).done;){var r=t.value;switch(r.type){case s.MessageType.Invocation:this._invokeClientMethod(r);break;case s.MessageType.StreamItem:case s.MessageType.Completion:var o=this._callbacks[r.invocationId];if(o){r.type===s.MessageType.Completion&&delete this._callbacks[r.invocationId];try{o(r)}catch(e){this._logger.log(h.LogLevel.Error,"Stream callback threw error: "+p.getErrorString(e))}}break;case s.MessageType.Ping:break;case s.MessageType.Close:this._logger.log(h.LogLevel.Information,"Close message received from server.");var i=r.error?new Error("Server returned an error on close: "+r.error):void 0;!0===r.allowReconnect?this.connection.stop(i):this._stopPromise=this._stopInternal(i);break;default:this._logger.log(h.LogLevel.Warning,"Invalid message type: "+r.type+".")}}this._resetTimeoutPeriod()},o._processHandshakeResponse=function(e){var t,n;try{var r=this._handshakeProtocol.parseHandshakeResponse(e);n=r[0],t=r[1]}catch(e){var o="Error parsing handshake response: "+e;this._logger.log(h.LogLevel.Error,o);var i=new Error(o);throw this._handshakeRejecter(i),i}if(t.error){var c="Server returned handshake error: "+t.error;this._logger.log(h.LogLevel.Error,c);var a=new Error(c);throw this._handshakeRejecter(a),a}return this._logger.log(h.LogLevel.Debug,"Server handshake complete."),this._handshakeResolver(),n},o._resetKeepAliveInterval=function(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=(new Date).getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())},o._resetTimeoutPeriod=function(){var e=this;if(!(this.connection.features&&this.connection.features.inherentKeepAlive||(this._timeoutHandle=setTimeout((function(){return e.serverTimeout()}),this.serverTimeoutInMilliseconds),void 0!==this._pingServerHandle))){var t=this._nextKeepAlive-(new Date).getTime();t<0&&(t=0),this._pingServerHandle=setTimeout(d(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e._connectionState!==i.Connected){t.next=9;break}return t.prev=1,t.next=4,e._sendMessage(e._cachedPingMessage);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),e._cleanupPingTimer();case 9:case"end":return t.stop()}}),t,null,[[1,6]])}))),t)}},o.serverTimeout=function(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))},o._invokeClientMethod=function(){var e=d(u().mark((function e(t){var n,r,o,i,c,a,s,g,d,f,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.toLowerCase(),r=this._methods[n]){e.next=9;break}if(this._logger.log(h.LogLevel.Warning,"No client method with the name '"+n+"' found."),!t.invocationId){e.next=8;break}return this._logger.log(h.LogLevel.Warning,"No result given for '"+n+"' method and invocation ID '"+t.invocationId+"'."),e.next=8,this._sendWithProtocol(this._createCompletionMessage(t.invocationId,"Client didn't provide a result.",null));case 8:return e.abrupt("return");case 9:o=r.slice(),i=!!t.invocationId,g=l(o);case 12:if((d=g()).done){e.next=29;break}return f=d.value,e.prev=14,p=c,e.next=18,f.apply(this,t.arguments);case 18:c=e.sent,i&&c&&p&&(this._logger.log(h.LogLevel.Error,"Multiple results provided for '"+n+"'. Sending error to server."),s=this._createCompletionMessage(t.invocationId,"Client provided multiple results.",null)),a=void 0,e.next=27;break;case 23:e.prev=23,e.t0=e.catch(14),a=e.t0,this._logger.log(h.LogLevel.Error,"A callback for the method '"+n+"' threw error '"+e.t0+"'.");case 27:e.next=12;break;case 29:if(!s){e.next=34;break}return e.next=32,this._sendWithProtocol(s);case 32:e.next=41;break;case 34:if(!i){e.next=40;break}return a?s=this._createCompletionMessage(t.invocationId,""+a,null):void 0!==c?s=this._createCompletionMessage(t.invocationId,null,c):(this._logger.log(h.LogLevel.Warning,"No result given for '"+n+"' method and invocation ID '"+t.invocationId+"'."),s=this._createCompletionMessage(t.invocationId,"Client didn't provide a result.",null)),e.next=38,this._sendWithProtocol(s);case 38:e.next=41;break;case 40:c&&this._logger.log(h.LogLevel.Error,"Result given for '"+n+"' method but server is not expecting a result.");case 41:case"end":return e.stop()}}),e,this,[[14,23]])})));return function(t){return e.apply(this,arguments)}}(),o._connectionClosed=function(e){this._logger.log(h.LogLevel.Debug,"HubConnection.connectionClosed("+e+") called while in state "+this._connectionState+"."),this._stopDuringStartError=this._stopDuringStartError||e||new a.AbortError("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===i.Disconnecting?this._completeClose(e):this._connectionState===i.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===i.Connected&&this._completeClose(e)},o._completeClose=function(e){var t=this;if(this._connectionStarted){this._connectionState=i.Disconnected,this._connectionStarted=!1,p.Platform.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach((function(n){return n.apply(t,[e])}))}catch(t){this._logger.log(h.LogLevel.Error,"An onclose callback called with error '"+e+"' threw error '"+t+"'.")}}},o._reconnect=function(){var e=d(u().mark((function e(t){var n,r,o,c,a=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Date.now(),r=0,o=void 0!==t?t:new Error("Attempting to reconnect due to a unknown error."),null!==(c=this._getNextRetryDelay(r++,0,o))){e.next=8;break}return this._logger.log(h.LogLevel.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(t),e.abrupt("return");case 8:if(this._connectionState=i.Reconnecting,t?this._logger.log(h.LogLevel.Information,"Connection reconnecting because of error '"+t+"'."):this._logger.log(h.LogLevel.Information,"Connection reconnecting."),0===this._reconnectingCallbacks.length){e.next=15;break}try{this._reconnectingCallbacks.forEach((function(e){return e.apply(a,[t])}))}catch(e){this._logger.log(h.LogLevel.Error,"An onreconnecting callback called with error '"+t+"' threw error '"+e+"'.")}if(this._connectionState===i.Reconnecting){e.next=15;break}return this._logger.log(h.LogLevel.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting."),e.abrupt("return");case 15:if(null===c){e.next=43;break}return this._logger.log(h.LogLevel.Information,"Reconnect attempt number "+r+" will start in "+c+" ms."),e.next=19,new Promise((function(e){a._reconnectDelayHandle=setTimeout(e,c)}));case 19:if(this._reconnectDelayHandle=void 0,this._connectionState===i.Reconnecting){e.next=23;break}return this._logger.log(h.LogLevel.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting."),e.abrupt("return");case 23:return e.prev=23,e.next=26,this._startInternal();case 26:if(this._connectionState=i.Connected,this._logger.log(h.LogLevel.Information,"HubConnection reconnected successfully."),0!==this._reconnectedCallbacks.length)try{this._reconnectedCallbacks.forEach((function(e){return e.apply(a,[a.connection.connectionId])}))}catch(e){this._logger.log(h.LogLevel.Error,"An onreconnected callback called with connectionId '"+this.connection.connectionId+"; threw error '"+e+"'.")}return e.abrupt("return");case 32:if(e.prev=32,e.t0=e.catch(23),this._logger.log(h.LogLevel.Information,"Reconnect attempt failed because of error '"+e.t0+"'."),this._connectionState===i.Reconnecting){e.next=39;break}return this._logger.log(h.LogLevel.Debug,"Connection moved to the '"+this._connectionState+"' from the reconnecting state during reconnect attempt. Done reconnecting."),this._connectionState===i.Disconnecting&&this._completeClose(),e.abrupt("return");case 39:o=e.t0 instanceof Error?e.t0:new Error(e.t0.toString()),c=this._getNextRetryDelay(r++,Date.now()-n,o);case 41:e.next=15;break;case 43:this._logger.log(h.LogLevel.Information,"Reconnect retries have been exhausted after "+(Date.now()-n)+" ms and "+r+" failed attempts. Connection disconnecting."),this._completeClose();case 45:case"end":return e.stop()}}),e,this,[[23,32]])})));return function(t){return e.apply(this,arguments)}}(),o._getNextRetryDelay=function(e,t,n){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:t,previousRetryCount:e,retryReason:n})}catch(n){return this._logger.log(h.LogLevel.Error,"IRetryPolicy.nextRetryDelayInMilliseconds("+e+", "+t+") threw error '"+n+"'."),null}},o._cancelCallbacksWithError=function(e){var t=this,n=this._callbacks;this._callbacks={},Object.keys(n).forEach((function(r){var o=n[r];try{o(null,e)}catch(n){t._logger.log(h.LogLevel.Error,"Stream 'error' callback called with '"+e+"' threw error: "+p.getErrorString(n))}}))},o._cleanupPingTimer=function(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)},o._cleanupTimeout=function(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)},o._createInvocation=function(e,t,n,r){if(n)return 0!==r.length?{arguments:t,streamIds:r,target:e,type:s.MessageType.Invocation}:{arguments:t,target:e,type:s.MessageType.Invocation};var o=this._invocationId;return this._invocationId++,0!==r.length?{arguments:t,invocationId:o.toString(),streamIds:r,target:e,type:s.MessageType.Invocation}:{arguments:t,invocationId:o.toString(),target:e,type:s.MessageType.Invocation}},o._launchStreams=function(e,t){var n=this;if(0!==e.length){t||(t=Promise.resolve());var r=function(r){e[r].subscribe({complete:function(){t=t.then((function(){return n._sendWithProtocol(n._createCompletionMessage(r))}))},error:function(e){var o;o=e instanceof Error?e.message:e&&e.toString?e.toString():"Unknown error",t=t.then((function(){return n._sendWithProtocol(n._createCompletionMessage(r,o))}))},next:function(e){t=t.then((function(){return n._sendWithProtocol(n._createStreamItemMessage(r,e))}))}})};for(var o in e)r(o)}},o._replaceStreamingParams=function(e){for(var t=[],n=[],r=0;r<e.length;r++){var o=e[r];if(this._isObservable(o)){var i=this._invocationId;this._invocationId++,t[i]=o,n.push(i.toString()),e.splice(r,1)}}return[t,n]},o._isObservable=function(e){return e&&e.subscribe&&"function"==typeof e.subscribe},o._createStreamInvocation=function(e,t,n){var r=this._invocationId;return this._invocationId++,0!==n.length?{arguments:t,invocationId:r.toString(),streamIds:n,target:e,type:s.MessageType.StreamInvocation}:{arguments:t,invocationId:r.toString(),target:e,type:s.MessageType.StreamInvocation}},o._createCancelInvocation=function(e){return{invocationId:e,type:s.MessageType.CancelInvocation}},o._createStreamItemMessage=function(e,t){return{invocationId:e,item:t,type:s.MessageType.StreamItem}},o._createCompletionMessage=function(e,t,n){return t?{error:t,invocationId:e,type:s.MessageType.Completion}:{invocationId:e,result:n,type:s.MessageType.Completion}},t=e,(n=[{key:"state",get:function(){return this._connectionState}},{key:"connectionId",get:function(){return this.connection&&this.connection.connectionId||null}},{key:"baseUrl",get:function(){return this.connection.baseUrl||""},set:function(e){if(this._connectionState!==i.Disconnected&&this._connectionState!==i.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}}])&&f(t.prototype,n),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.HubConnection=v,n.exports,n.exports.__esModule,n.exports.HubConnection,n.exports.HubConnectionState}),(function(){return{"./HandshakeProtocol":r,"./Errors":o,"./IHubProtocol":i,"./ILogger":c,"./Subject":a,"./Utils":s}}))}}}));

System.register("chunks:///_virtual/HubConnectionBuilder.js",["./cjs-loader.mjs","./DefaultReconnectPolicy.js","./HttpConnection.js","./HubConnection.js","./ILogger.js","./JsonHubProtocol.js","./Loggers.js","./Utils.js"],(function(o,e){"use strict";var n,t,r,i,c,s,l,u;return{setters:[function(o){n=o.default},function(o){t=o.__cjsMetaURL},function(o){r=o.__cjsMetaURL},function(o){i=o.__cjsMetaURL},function(o){c=o.__cjsMetaURL},function(o){s=o.__cjsMetaURL},function(o){l=o.__cjsMetaURL},function(o){u=o.__cjsMetaURL}],execute:function(){function g(){return(g=Object.assign?Object.assign.bind():function(o){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(o[t]=n[t])}return o}).apply(this,arguments)}var a=o("__cjsMetaURL",e.meta.url);n.define(a,(function(o,e,n,t,r){Object.defineProperty(o,"__esModule",{value:!0}),o.HubConnectionBuilder=void 0;var i=e("./DefaultReconnectPolicy"),c=e("./HttpConnection"),s=e("./HubConnection"),l=e("./ILogger"),u=e("./JsonHubProtocol"),a=e("./Loggers"),f=e("./Utils"),h={trace:l.LogLevel.Trace,debug:l.LogLevel.Debug,info:l.LogLevel.Information,information:l.LogLevel.Information,warn:l.LogLevel.Warning,warning:l.LogLevel.Warning,error:l.LogLevel.Error,critical:l.LogLevel.Critical,none:l.LogLevel.None};var L=function(){function o(){}var e=o.prototype;return e.configureLogging=function(o){if(f.Arg.isRequired(o,"logging"),void 0!==o.log)this.logger=o;else if("string"==typeof o){var e=function(o){var e=h[o.toLowerCase()];if(void 0!==e)return e;throw new Error("Unknown log level: "+o)}(o);this.logger=new f.ConsoleLogger(e)}else this.logger=new f.ConsoleLogger(o);return this},e.withUrl=function(o,e){return f.Arg.isRequired(o,"url"),f.Arg.isNotEmpty(o,"url"),this.url=o,this.httpConnectionOptions=g({},this.httpConnectionOptions,"object"==typeof e?e:{transport:e}),this},e.withHubProtocol=function(o){return f.Arg.isRequired(o,"protocol"),this.protocol=o,this},e.withAutomaticReconnect=function(o){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return o?Array.isArray(o)?this.reconnectPolicy=new i.DefaultReconnectPolicy(o):this.reconnectPolicy=o:this.reconnectPolicy=new i.DefaultReconnectPolicy,this},e.build=function(){var o=this.httpConnectionOptions||{};if(void 0===o.logger&&(o.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");var e=new c.HttpConnection(this.url,o);return s.HubConnection.create(e,this.logger||a.NullLogger.instance,this.protocol||new u.JsonHubProtocol,this.reconnectPolicy)},o}();o.HubConnectionBuilder=L,n.exports,n.exports.__esModule,n.exports.HubConnectionBuilder}),(function(){return{"./DefaultReconnectPolicy":t,"./HttpConnection":r,"./HubConnection":i,"./ILogger":c,"./JsonHubProtocol":s,"./Loggers":l,"./Utils":u}}))}}}));

System.register("chunks:///_virtual/IHubProtocol.js",["./cjs-loader.mjs"],(function(e,t){"use strict";var o;return{setters:[function(e){o=e.default}],execute:function(){var n=e("__cjsMetaURL",t.meta.url);o.define(n,(function(e,t,o,n,s){var a;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageType=void 0,(a=e.MessageType||(e.MessageType={}))[a.Invocation=1]="Invocation",a[a.StreamItem=2]="StreamItem",a[a.Completion=3]="Completion",a[a.StreamInvocation=4]="StreamInvocation",a[a.CancelInvocation=5]="CancelInvocation",a[a.Ping=6]="Ping",a[a.Close=7]="Close",o.exports,o.exports.__esModule,o.exports.MessageType}),{})}}}));

System.register("chunks:///_virtual/ILogger.js",["./cjs-loader.mjs"],(function(e,r){"use strict";var o;return{setters:[function(e){o=e.default}],execute:function(){var t=e("__cjsMetaURL",r.meta.url);o.define(t,(function(e,r,o,t,n){var i;Object.defineProperty(e,"__esModule",{value:!0}),e.LogLevel=void 0,(i=e.LogLevel||(e.LogLevel={}))[i.Trace=0]="Trace",i[i.Debug=1]="Debug",i[i.Information=2]="Information",i[i.Warning=3]="Warning",i[i.Error=4]="Error",i[i.Critical=5]="Critical",i[i.None=6]="None",o.exports,o.exports.__esModule,o.exports.LogLevel}),{})}}}));

System.register("chunks:///_virtual/index.js",["./cjs-loader.mjs","./Errors.js","./HttpClient.js","./DefaultHttpClient.js","./HubConnection.js","./HubConnectionBuilder.js","./IHubProtocol.js","./ILogger.js","./ITransport.js","./Loggers.js","./JsonHubProtocol.js","./Subject.js","./Utils.js"],(function(e,t){"use strict";var r,n,o,u,i,c,s,p,a,l,b,f,H;return{setters:[function(e){r=e.default},function(e){n=e.__cjsMetaURL},function(e){o=e.__cjsMetaURL},function(e){u=e.__cjsMetaURL},function(e){i=e.__cjsMetaURL},function(e){c=e.__cjsMetaURL},function(e){s=e.__cjsMetaURL},function(e){p=e.__cjsMetaURL},function(e){a=e.__cjsMetaURL},function(e){l=e.__cjsMetaURL},function(e){b=e.__cjsMetaURL},function(e){f=e.__cjsMetaURL},function(e){H=e.__cjsMetaURL}],execute:function(){e("default",void 0);var j=e("__cjsMetaURL",t.meta.url);r.define(j,(function(t,r,n,o,u){Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=t.Subject=t.JsonHubProtocol=t.NullLogger=t.TransferFormat=t.HttpTransportType=t.LogLevel=t.MessageType=t.HubConnectionBuilder=t.HubConnectionState=t.HubConnection=t.DefaultHttpClient=t.HttpResponse=t.HttpClient=t.TimeoutError=t.HttpError=t.AbortError=void 0;var i=r("./Errors");Object.defineProperty(t,"AbortError",{enumerable:!0,get:function(){return i.AbortError}}),Object.defineProperty(t,"HttpError",{enumerable:!0,get:function(){return i.HttpError}}),Object.defineProperty(t,"TimeoutError",{enumerable:!0,get:function(){return i.TimeoutError}});var c=r("./HttpClient");Object.defineProperty(t,"HttpClient",{enumerable:!0,get:function(){return c.HttpClient}}),Object.defineProperty(t,"HttpResponse",{enumerable:!0,get:function(){return c.HttpResponse}});var s=r("./DefaultHttpClient");Object.defineProperty(t,"DefaultHttpClient",{enumerable:!0,get:function(){return s.DefaultHttpClient}});var p=r("./HubConnection");Object.defineProperty(t,"HubConnection",{enumerable:!0,get:function(){return p.HubConnection}}),Object.defineProperty(t,"HubConnectionState",{enumerable:!0,get:function(){return p.HubConnectionState}});var a=r("./HubConnectionBuilder");Object.defineProperty(t,"HubConnectionBuilder",{enumerable:!0,get:function(){return a.HubConnectionBuilder}});var l=r("./IHubProtocol");Object.defineProperty(t,"MessageType",{enumerable:!0,get:function(){return l.MessageType}});var b=r("./ILogger");Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return b.LogLevel}});var f=r("./ITransport");Object.defineProperty(t,"HttpTransportType",{enumerable:!0,get:function(){return f.HttpTransportType}}),Object.defineProperty(t,"TransferFormat",{enumerable:!0,get:function(){return f.TransferFormat}});var H=r("./Loggers");Object.defineProperty(t,"NullLogger",{enumerable:!0,get:function(){return H.NullLogger}});var j=r("./JsonHubProtocol");Object.defineProperty(t,"JsonHubProtocol",{enumerable:!0,get:function(){return j.JsonHubProtocol}});var g=r("./Subject");Object.defineProperty(t,"Subject",{enumerable:!0,get:function(){return g.Subject}});var d=r("./Utils");Object.defineProperty(t,"VERSION",{enumerable:!0,get:function(){return d.VERSION}}),e("default",n.exports),n.exports.__esModule,n.exports.VERSION,n.exports.Subject,n.exports.JsonHubProtocol,n.exports.NullLogger,n.exports.TransferFormat,n.exports.HttpTransportType,n.exports.LogLevel,n.exports.MessageType,n.exports.HubConnectionBuilder,n.exports.HubConnectionState,n.exports.HubConnection,n.exports.DefaultHttpClient,n.exports.HttpResponse,n.exports.HttpClient,n.exports.TimeoutError,n.exports.HttpError,n.exports.AbortError}),(function(){return{"./Errors":n,"./HttpClient":o,"./DefaultHttpClient":u,"./HubConnection":i,"./HubConnectionBuilder":c,"./IHubProtocol":s,"./ILogger":p,"./ITransport":a,"./Loggers":l,"./JsonHubProtocol":b,"./Subject":f,"./Utils":H}}))}}}));

System.register("chunks:///_virtual/index.mjs_cjs=&original=.js",["./index.js","./cjs-loader.mjs"],(function(e,t){"use strict";var r,s;return{setters:[function(t){r=t.__cjsMetaURL;var s={};s.__cjsMetaURL=t.__cjsMetaURL,s.default=t.default,e(s)},function(e){s=e.default}],execute:function(){r||s.throwInvalidWrapper("./index.js",t.meta.url),s.require(r)}}}));

System.register("chunks:///_virtual/ITransport.js",["./cjs-loader.mjs"],(function(e,t){"use strict";var r;return{setters:[function(e){r=e.default}],execute:function(){var n=e("__cjsMetaURL",t.meta.url);r.define(n,(function(e,t,r,n,o){var s,a;Object.defineProperty(e,"__esModule",{value:!0}),e.TransferFormat=e.HttpTransportType=void 0,(s=e.HttpTransportType||(e.HttpTransportType={}))[s.None=0]="None",s[s.WebSockets=1]="WebSockets",s[s.ServerSentEvents=2]="ServerSentEvents",s[s.LongPolling=4]="LongPolling",(a=e.TransferFormat||(e.TransferFormat={}))[a.Text=1]="Text",a[a.Binary=2]="Binary",r.exports,r.exports.__esModule,r.exports.TransferFormat,r.exports.HttpTransportType}),{})}}}));

System.register("chunks:///_virtual/JsonHubProtocol.js",["./cjs-loader.mjs","./IHubProtocol.js","./ILogger.js","./ITransport.js","./Loggers.js","./TextMessageFormat.js"],(function(e,t){"use strict";var r,o,n,s,a,i;return{setters:[function(e){r=e.default},function(e){o=e.__cjsMetaURL},function(e){n=e.__cjsMetaURL},function(e){s=e.__cjsMetaURL},function(e){a=e.__cjsMetaURL},function(e){i=e.__cjsMetaURL}],execute:function(){function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}var l=e("__cjsMetaURL",t.meta.url);r.define(l,(function(e,t,r,o,n){Object.defineProperty(e,"__esModule",{value:!0}),e.JsonHubProtocol=void 0;var s=t("./IHubProtocol"),a=t("./ILogger"),i=t("./ITransport"),c=t("./Loggers"),l=t("./TextMessageFormat"),g=function(){function e(){this.name="json",this.version=1,this.transferFormat=i.TransferFormat.Text}var t=e.prototype;return t.parseMessages=function(e,t){if("string"!=typeof e)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];null===t&&(t=c.NullLogger.instance);for(var r,o=[],n=u(l.TextMessageFormat.parse(e));!(r=n()).done;){var i=r.value,g=JSON.parse(i);if("number"!=typeof g.type)throw new Error("Invalid payload.");switch(g.type){case s.MessageType.Invocation:this._isInvocationMessage(g);break;case s.MessageType.StreamItem:this._isStreamItemMessage(g);break;case s.MessageType.Completion:this._isCompletionMessage(g);break;case s.MessageType.Ping:case s.MessageType.Close:break;default:t.log(a.LogLevel.Information,"Unknown message type '"+g.type+"' ignored.");continue}o.push(g)}return o},t.writeMessage=function(e){return l.TextMessageFormat.write(JSON.stringify(e))},t._isInvocationMessage=function(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),void 0!==e.invocationId&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")},t._isStreamItemMessage=function(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),void 0===e.item)throw new Error("Invalid payload for StreamItem message.")},t._isCompletionMessage=function(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")},t._assertNotEmptyString=function(e,t){if("string"!=typeof e||""===e)throw new Error(t)},e}();e.JsonHubProtocol=g,r.exports,r.exports.__esModule,r.exports.JsonHubProtocol}),(function(){return{"./IHubProtocol":o,"./ILogger":n,"./ITransport":s,"./Loggers":a,"./TextMessageFormat":i}}))}}}));

System.register("chunks:///_virtual/Loggers.js",["./cjs-loader.mjs"],(function(e,t){"use strict";var r;return{setters:[function(e){r=e.default}],execute:function(){var n=e("__cjsMetaURL",t.meta.url);r.define(n,(function(e,t,r,n,o){Object.defineProperty(e,"__esModule",{value:!0}),e.NullLogger=void 0;var u=function(){function e(){}return e.prototype.log=function(e,t){},e}();e.NullLogger=u,u.instance=new u,r.exports,r.exports.__esModule,r.exports.NullLogger}),{})}}}));

System.register("chunks:///_virtual/LongPollingTransport.js",["./cjs-loader.mjs","./AbortController.js","./Errors.js","./ILogger.js","./ITransport.js","./Utils.js"],(function(t,e){"use strict";var r,n,o,i,a,s;return{setters:[function(t){r=t.default},function(t){n=t.__cjsMetaURL},function(t){o=t.__cjsMetaURL},function(t){i=t.__cjsMetaURL},function(t){a=t.__cjsMetaURL},function(t){s=t.__cjsMetaURL}],execute:function(){function l(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
l=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),s=new T(o||[]);return n(a,"_invoke",{value:b(t,r,s)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var g={};function p(){}function f(){}function v(){}var d={};c(d,i,(function(){return this}));var y=Object.getPrototypeOf,_=y&&y(y(j([])));_&&_!==e&&r.call(_,i)&&(d=_);var L=v.prototype=p.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,s){var l=h(t[n],t,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==typeof u&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(u).then((function(t){c.value=t,a(c)}),(function(t){return o("throw",t,a,s)}))}s(l.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function b(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return C()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=x(a,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=h(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return g;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var n=h(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,g;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,g):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function j(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return f.prototype=v,n(L,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:f,configurable:!0}),f.displayName=c(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,s,"GeneratorFunction")),t.prototype=Object.create(L),t},t.awrap=function(t){return{__await:t}},m(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(L),c(L,s,"Generator"),c(L,i,(function(){return this})),c(L,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=j,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),g}},t}function c(){return(c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function u(t,e,r,n,o,i,a){try{var s=t[i](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,o)}function h(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){u(i,n,o,a,s,"next",t)}function s(t){u(i,n,o,a,s,"throw",t)}a(void 0)}))}}function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var p=t("__cjsMetaURL",e.meta.url);r.define(p,(function(t,e,r,n,o){Object.defineProperty(t,"__esModule",{value:!0}),t.LongPollingTransport=void 0;var i=e("./AbortController"),a=e("./Errors"),s=e("./ILogger"),u=e("./ITransport"),p=e("./Utils"),f=function(){function t(t,e,r){this._httpClient=t,this._logger=e,this._pollAbort=new i.AbortController,this._options=r,this._running=!1,this.onreceive=null,this.onclose=null}var e,r,n,o=t.prototype;return o.connect=function(){var t=h(l().mark((function t(e,r){var n,o,i,h,g,f,v,d;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p.Arg.isRequired(e,"url"),p.Arg.isRequired(r,"transferFormat"),p.Arg.isIn(r,u.TransferFormat,"transferFormat"),this._url=e,this._logger.log(s.LogLevel.Trace,"(LongPolling transport) Connecting."),r!==u.TransferFormat.Binary||"undefined"==typeof XMLHttpRequest||"string"==typeof(new XMLHttpRequest).responseType){t.next=7;break}throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");case 7:return o=p.getUserAgentHeader(),i=o[0],h=o[1],g=c(((n={})[i]=h,n),this._options.headers),f={abortSignal:this._pollAbort.signal,headers:g,timeout:1e5,withCredentials:this._options.withCredentials},r===u.TransferFormat.Binary&&(f.responseType="arraybuffer"),v=e+"&_="+Date.now(),this._logger.log(s.LogLevel.Trace,"(LongPolling transport) polling: "+v+"."),t.next=15,this._httpClient.get(v,f);case 15:200!==(d=t.sent).statusCode?(this._logger.log(s.LogLevel.Error,"(LongPolling transport) Unexpected response code: "+d.statusCode+"."),this._closeError=new a.HttpError(d.statusText||"",d.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,f);case 18:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),o._poll=function(){var t=h(l().mark((function t(e,r){var n,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0;case 1:if(!this._running){t.next=16;break}return t.prev=2,n=e+"&_="+Date.now(),this._logger.log(s.LogLevel.Trace,"(LongPolling transport) polling: "+n+"."),t.next=7,this._httpClient.get(n,r);case 7:204===(o=t.sent).statusCode?(this._logger.log(s.LogLevel.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):200!==o.statusCode?(this._logger.log(s.LogLevel.Error,"(LongPolling transport) Unexpected response code: "+o.statusCode+"."),this._closeError=new a.HttpError(o.statusText||"",o.statusCode),this._running=!1):o.content?(this._logger.log(s.LogLevel.Trace,"(LongPolling transport) data received. "+p.getDataDetail(o.content,this._options.logMessageContent)+"."),this.onreceive&&this.onreceive(o.content)):this._logger.log(s.LogLevel.Trace,"(LongPolling transport) Poll timed out, reissuing."),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),this._running?t.t0 instanceof a.TimeoutError?this._logger.log(s.LogLevel.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=t.t0,this._running=!1):this._logger.log(s.LogLevel.Trace,"(LongPolling transport) Poll errored after shutdown: "+t.t0.message);case 14:t.next=1;break;case 16:return t.prev=16,this._logger.log(s.LogLevel.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose(),t.finish(16);case 20:case"end":return t.stop()}}),t,this,[[0,,16,20],[2,11]])})));return function(e,r){return t.apply(this,arguments)}}(),o.send=function(){var t=h(l().mark((function t(e){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._running){t.next=2;break}return t.abrupt("return",Promise.reject(new Error("Cannot send until the transport is connected")));case 2:return t.abrupt("return",p.sendMessage(this._logger,"LongPolling",this._httpClient,this._url,e,this._options));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),o.stop=function(){var t=h(l().mark((function t(){var e,r,n,o,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._logger.log(s.LogLevel.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort(),t.prev=3,t.next=6,this._receiving;case 6:return this._logger.log(s.LogLevel.Trace,"(LongPolling transport) sending DELETE request to "+this._url+"."),e={},r=p.getUserAgentHeader(),n=r[0],o=r[1],e[n]=o,i={headers:c({},e,this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials},t.next=13,this._httpClient.delete(this._url,i);case 13:this._logger.log(s.LogLevel.Trace,"(LongPolling transport) DELETE request sent.");case 14:return t.prev=14,this._logger.log(s.LogLevel.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose(),t.finish(14);case 18:case"end":return t.stop()}}),t,this,[[3,,14,18]])})));return function(){return t.apply(this,arguments)}}(),o._raiseOnClose=function(){if(this.onclose){var t="(LongPolling transport) Firing onclose event.";this._closeError&&(t+=" Error: "+this._closeError),this._logger.log(s.LogLevel.Trace,t),this.onclose(this._closeError)}},e=t,(r=[{key:"pollAborted",get:function(){return this._pollAbort.aborted}}])&&g(e.prototype,r),n&&g(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.LongPollingTransport=f,r.exports,r.exports.__esModule,r.exports.LongPollingTransport}),(function(){return{"./AbortController":n,"./Errors":o,"./ILogger":i,"./ITransport":a,"./Utils":s}}))}}}));

System.register("chunks:///_virtual/rollupPluginModLoBabelHelpers.js",[],(function(t){"use strict";return{execute:function(){function e(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(e,r){return(n=t("setPrototypeOf",Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t}))(e,r)}t({applyDecoratedDescriptor:function(t,e,r,n,o){var i={};Object.keys(n).forEach((function(t){i[t]=n[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0);i=r.slice().reverse().reduce((function(r,n){return n(t,e,r)||r}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0);void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null);return i},assertThisInitialized:function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},asyncToGenerator:function(t){return function(){var r=this,n=arguments;return new Promise((function(o,i){var a=t.apply(r,n);function c(t){e(a,o,i,c,u,"next",t)}function u(t){e(a,o,i,c,u,"throw",t)}c(void 0)}))}},createClass:function(t,e,n){e&&r(t.prototype,e);n&&r(t,n);return Object.defineProperty(t,"prototype",{writable:!1}),t},inheritsLoose:function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,n(t,e)},initializerDefineProperty:function(t,e,r,n){if(!r)return;Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})},regeneratorRuntime:function(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
t("regeneratorRuntime",(function(){return e}));var e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new _(n||[]);return o(a,"_invoke",{value:x(t,r,c)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var h={};function p(){}function v(){}function y(){}var d={};l(d,a,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(P([])));m&&m!==r&&n.call(m,a)&&(d=m);var b=y.prototype=p.prototype=Object.create(d);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=O(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function P(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return v.prototype=y,o(b,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:v,configurable:!0}),v.displayName=l(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,u,"GeneratorFunction")),t.prototype=Object.create(b),t},e.awrap=function(t){return{__await:t}},w(L.prototype),l(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),l(b,u,"Generator"),l(b,a,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:P(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e},setPrototypeOf:n})}}}));

System.register("chunks:///_virtual/ServerSentEventsTransport.js",["./cjs-loader.mjs","./ILogger.js","./ITransport.js","./Utils.js"],(function(t,e){"use strict";var r,n,o,i;return{setters:[function(t){r=t.default},function(t){n=t.__cjsMetaURL},function(t){o=t.__cjsMetaURL},function(t){i=t.__cjsMetaURL}],execute:function(){function a(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
a=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new j(o||[]);return n(a,"_invoke",{value:b(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function v(){}function d(){}var g={};u(g,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(T([])));m&&m!==e&&r.call(m,i)&&(g=m);var w=d.prototype=p.prototype=Object.create(g);function _(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function o(n,i,a,c){var s=h(t[n],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,c)}))}c(s.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function b(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=h(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=h(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return v.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:v,configurable:!0}),v.displayName=u(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},_(L.prototype),u(L.prototype,c,(function(){return this})),t.AsyncIterator=L,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(w),u(w,s,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=T,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:T(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function c(){return(c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function s(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function u(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){s(i,n,o,a,c,"next",t)}function c(t){s(i,n,o,a,c,"throw",t)}a(void 0)}))}}var l=t("__cjsMetaURL",e.meta.url);r.define(l,(function(t,e,r,n,o){Object.defineProperty(t,"__esModule",{value:!0}),t.ServerSentEventsTransport=void 0;var i=e("./ILogger"),s=e("./ITransport"),l=e("./Utils"),h=function(){function t(t,e,r,n){this._httpClient=t,this._accessToken=e,this._logger=r,this._options=n,this.onreceive=null,this.onclose=null}var e=t.prototype;return e.connect=function(){var t=u(a().mark((function t(e,r){var n=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l.Arg.isRequired(e,"url"),l.Arg.isRequired(r,"transferFormat"),l.Arg.isIn(r,s.TransferFormat,"transferFormat"),this._logger.log(i.LogLevel.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(this._accessToken)),t.abrupt("return",new Promise((function(t,o){var a=!1;if(r===s.TransferFormat.Text){var u;if(l.Platform.isBrowser||l.Platform.isWebWorker)u=new n._options.EventSource(e,{withCredentials:n._options.withCredentials});else{var h=n._httpClient.getCookieString(e),f={};f.Cookie=h;var p=l.getUserAgentHeader(),v=p[0],d=p[1];f[v]=d,u=new n._options.EventSource(e,{withCredentials:n._options.withCredentials,headers:c({},f,n._options.headers)})}try{u.onmessage=function(t){if(n.onreceive)try{n._logger.log(i.LogLevel.Trace,"(SSE transport) data received. "+l.getDataDetail(t.data,n._options.logMessageContent)+"."),n.onreceive(t.data)}catch(t){return void n._close(t)}},u.onerror=function(t){a?n._close():o(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},u.onopen=function(){n._logger.log(i.LogLevel.Information,"SSE connected to "+n._url),n._eventSource=u,a=!0,t()}}catch(t){return void o(t)}}else o(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))})));case 7:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.send=function(){var t=u(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._eventSource){t.next=2;break}return t.abrupt("return",Promise.reject(new Error("Cannot send until the transport is connected")));case 2:return t.abrupt("return",l.sendMessage(this._logger,"SSE",this._httpClient,this._url,e,this._options));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.stop=function(){return this._close(),Promise.resolve()},e._close=function(t){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(t))},t}();t.ServerSentEventsTransport=h,r.exports,r.exports.__esModule,r.exports.ServerSentEventsTransport}),(function(){return{"./ILogger":n,"./ITransport":o,"./Utils":i}}))}}}));

System.register("chunks:///_virtual/Subject.js",["./cjs-loader.mjs","./Utils.js"],(function(e,r){"use strict";var t,n;return{setters:[function(e){t=e.default},function(e){n=e.__cjsMetaURL}],execute:function(){function o(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return u(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return u(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var i=e("__cjsMetaURL",r.meta.url);t.define(i,(function(e,r,t,n,u){Object.defineProperty(e,"__esModule",{value:!0}),e.Subject=void 0;var i=r("./Utils"),s=function(){function e(){this.observers=[]}var r=e.prototype;return r.next=function(e){for(var r,t=o(this.observers);!(r=t()).done;){r.value.next(e)}},r.error=function(e){for(var r,t=o(this.observers);!(r=t()).done;){var n=r.value;n.error&&n.error(e)}},r.complete=function(){for(var e,r=o(this.observers);!(e=r()).done;){var t=e.value;t.complete&&t.complete()}},r.subscribe=function(e){return this.observers.push(e),new i.SubjectSubscription(this,e)},e}();e.Subject=s,t.exports,t.exports.__esModule,t.exports.Subject}),(function(){return{"./Utils":n}}))}}}));

System.register("chunks:///_virtual/TextMessageFormat.js",["./cjs-loader.mjs"],(function(e,r){"use strict";var t;return{setters:[function(e){t=e.default}],execute:function(){var o=e("__cjsMetaURL",r.meta.url);t.define(o,(function(e,r,t,o,a){Object.defineProperty(e,"__esModule",{value:!0}),e.TextMessageFormat=void 0;var s=function(){function e(){}return e.write=function(r){return""+r+e.RecordSeparator},e.parse=function(r){if(r[r.length-1]!==e.RecordSeparator)throw new Error("Message is incomplete.");var t=r.split(e.RecordSeparator);return t.pop(),t},e}();e.TextMessageFormat=s,s.RecordSeparatorCode=30,s.RecordSeparator=String.fromCharCode(s.RecordSeparatorCode),t.exports,t.exports.__esModule,t.exports.TextMessageFormat}),{})}}}));

System.register("chunks:///_virtual/Utils.js",["./cjs-loader.mjs","./ILogger.js","./Loggers.js"],(function(t,e){"use strict";var r,n,o;return{setters:[function(t){r=t.default},function(t){n=t.__cjsMetaURL},function(t){o=t.__cjsMetaURL}],execute:function(){function i(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
i=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function f(t,e,r,o){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),u=new S(o||[]);return n(a,"_invoke",{value:x(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var h={};function g(){}function p(){}function d(){}var v={};c(v,a,(function(){return this}));var y=Object.getPrototypeOf,w=y&&y(y(O([])));w&&w!==e&&r.call(w,a)&&(v=w);var m=d.prototype=g.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function o(n,i,a,u){var s=l(t[n],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return o("throw",t,a,u)}))}u(s.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=j(a,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function j(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,j(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function O(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=d,n(m,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,s,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},b(L.prototype),c(L.prototype,u,(function(){return this})),t.AsyncIterator=L,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new L(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(m),c(m,s,"Generator"),c(m,a,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function a(){return(a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function u(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function s(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){u(i,n,o,a,s,"next",t)}function s(t){u(i,n,o,a,s,"throw",t)}a(void 0)}))}}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var f=t("__cjsMetaURL",e.meta.url);r.define(f,(function(t,e,r,n,o){Object.defineProperty(t,"__esModule",{value:!0}),t.getGlobalThis=t.getErrorString=t.constructUserAgent=t.getUserAgentHeader=t.ConsoleLogger=t.SubjectSubscription=t.createLogger=t.sendMessage=t.isArrayBuffer=t.formatArrayBuffer=t.getDataDetail=t.Platform=t.Arg=t.VERSION=void 0;var u=e("./ILogger"),f=e("./Loggers");t.VERSION="7.0.4";var l=function(){function t(){}return t.isRequired=function(t,e){if(null==t)throw new Error("The '"+e+"' argument is required.")},t.isNotEmpty=function(t,e){if(!t||t.match(/^\s*$/))throw new Error("The '"+e+"' argument should not be empty.")},t.isIn=function(t,e,r){if(!(t in e))throw new Error("Unknown "+r+" value: "+t+".")},t}();t.Arg=l;var h=function(){function t(){}var e,r,n;return e=t,n=[{key:"isBrowser",get:function(){return"object"==typeof window&&"object"==typeof window.document}},{key:"isWebWorker",get:function(){return"object"==typeof self&&"importScripts"in self}},{key:"isReactNative",get:function(){return"object"==typeof window&&void 0===window.document}},{key:"isNode",get:function(){return!this.isBrowser&&!this.isWebWorker&&!this.isReactNative}}],(r=null)&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function g(t,e){var r="";return d(t)?(r="Binary data of length "+t.byteLength,e&&(r+=". Content: '"+p(t)+"'")):"string"==typeof t&&(r="String data of length "+t.length,e&&(r+=". Content: '"+t+"'")),r}function p(t){var e=new Uint8Array(t),r="";return e.forEach((function(t){r+="0x"+(t<16?"0":"")+t.toString(16)+" "})),r.substr(0,r.length-1)}function d(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function v(){return(v=s(i().mark((function t(e,r,n,o,s,c){var f,l,h,p,v,y;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f={},l=m(),h=l[0],p=l[1],f[h]=p,e.log(u.LogLevel.Trace,"("+r+" transport) sending data. "+g(s,c.logMessageContent)+"."),v=d(s)?"arraybuffer":"text",t.next=7,n.post(o,{content:s,headers:a({},f,c.headers),responseType:v,timeout:c.timeout,withCredentials:c.withCredentials});case 7:y=t.sent,e.log(u.LogLevel.Trace,"("+r+" transport) request complete. Response status: "+y.statusCode+".");case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}t.Platform=h,t.getDataDetail=g,t.formatArrayBuffer=p,t.isArrayBuffer=d,t.sendMessage=function(t,e,r,n,o,i){return v.apply(this,arguments)},t.createLogger=function(t){return void 0===t?new w(u.LogLevel.Information):null===t?f.NullLogger.instance:void 0!==t.log?t:new w(t)};var y=function(){function t(t,e){this._subject=t,this._observer=e}return t.prototype.dispose=function(){var t=this._subject.observers.indexOf(this._observer);t>-1&&this._subject.observers.splice(t,1),0===this._subject.observers.length&&this._subject.cancelCallback&&this._subject.cancelCallback().catch((function(t){}))},t}();t.SubjectSubscription=y;var w=function(){function t(t){this._minLevel=t,this.out=console}return t.prototype.log=function(t,e){if(t>=this._minLevel){var r="["+(new Date).toISOString()+"] "+u.LogLevel[t]+": "+e;switch(t){case u.LogLevel.Critical:case u.LogLevel.Error:this.out.error(r);break;case u.LogLevel.Warning:this.out.warn(r);break;case u.LogLevel.Information:this.out.info(r);break;default:this.out.log(r)}}},t}();function m(){var e="X-SignalR-User-Agent";return h.isNode&&(e="User-Agent"),[e,b(t.VERSION,L(),j(),x())]}function b(t,e,r,n){var o="Microsoft SignalR/",i=t.split(".");return o+=i[0]+"."+i[1],o+=" ("+t+"; ",o+=e&&""!==e?e+"; ":"Unknown OS; ",o+=""+r,o+=n?"; "+n:"; Unknown Runtime Version",o+=")"}function L(){if(!h.isNode)return"";switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}}function x(){if(h.isNode)return process.versions.node}function j(){return h.isNode?"NodeJS":"Browser"}t.ConsoleLogger=w,t.getUserAgentHeader=m,t.constructUserAgent=b,t.getErrorString=function(t){return t.stack?t.stack:t.message?t.message:""+t},t.getGlobalThis=function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("could not find global")},r.exports,r.exports.__esModule,r.exports.getGlobalThis,r.exports.getErrorString,r.exports.constructUserAgent,r.exports.getUserAgentHeader,r.exports.ConsoleLogger,r.exports.SubjectSubscription,r.exports.createLogger,r.exports.sendMessage,r.exports.isArrayBuffer,r.exports.formatArrayBuffer,r.exports.getDataDetail,r.exports.Platform,r.exports.Arg,r.exports.VERSION}),(function(){return{"./ILogger":n,"./Loggers":o}}))}}}));

System.register("chunks:///_virtual/WebSocketTransport.js",["./cjs-loader.mjs","./HeaderNames.js","./ILogger.js","./ITransport.js","./Utils.js"],(function(t,e){"use strict";var r,n,o,i,a;return{setters:[function(t){r=t.default},function(t){n=t.__cjsMetaURL},function(t){o=t.__cjsMetaURL},function(t){i=t.__cjsMetaURL},function(t){a=t.__cjsMetaURL}],execute:function(){function c(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
c=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new x(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function v(){}function d(){}var g={};u(g,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(j([])));m&&m!==e&&r.call(m,i)&&(g=m);var w=d.prototype=p.prototype=Object.create(g);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function o(n,i,a,c){var s=h(t[n],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,c)}))}c(s.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=L(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=h(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function L(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,L(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=h(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function j(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return v.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:v,configurable:!0}),v.displayName=u(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},b(_.prototype),u(_.prototype,a,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(w),u(w,s,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function s(){return(s=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function u(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}var l=t("__cjsMetaURL",e.meta.url);r.define(l,(function(t,e,r,n,o){Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketTransport=void 0;var i=e("./HeaderNames"),a=e("./ILogger"),l=e("./ITransport"),h=e("./Utils"),f=function(){function t(t,e,r,n,o,i){this._logger=r,this._accessTokenFactory=e,this._logMessageContent=n,this._webSocketConstructor=o,this._httpClient=t,this.onreceive=null,this.onclose=null,this._headers=i}var e=t.prototype;return e.connect=function(){var t,e=(t=c().mark((function t(e,r){var n,o=this;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(h.Arg.isRequired(e,"url"),h.Arg.isRequired(r,"transferFormat"),h.Arg.isIn(r,l.TransferFormat,"transferFormat"),this._logger.log(a.LogLevel.Trace,"(WebSockets transport) Connecting."),!this._accessTokenFactory){t.next=8;break}return t.next=7,this._accessTokenFactory();case 7:n=t.sent;case 8:return t.abrupt("return",new Promise((function(t,c){var u;e=e.replace(/^http/,"ws");var f=o._httpClient.getCookieString(e),p=!1;if(h.Platform.isNode||h.Platform.isReactNative){var v={},d=h.getUserAgentHeader(),g=d[0],y=d[1];v[g]=y,n&&(v[i.HeaderNames.Authorization]="Bearer "+n),f&&(v[i.HeaderNames.Cookie]=f),u=new o._webSocketConstructor(e,void 0,{headers:s({},v,o._headers)})}else n&&(e+=(e.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(n));u||(u=new o._webSocketConstructor(e)),r===l.TransferFormat.Binary&&(u.binaryType="arraybuffer"),u.onopen=function(r){o._logger.log(a.LogLevel.Information,"WebSocket connected to "+e+"."),o._webSocket=u,p=!0,t()},u.onerror=function(t){var e=null;e="undefined"!=typeof ErrorEvent&&t instanceof ErrorEvent?t.error:"There was an error with the transport",o._logger.log(a.LogLevel.Information,"(WebSockets transport) "+e+".")},u.onmessage=function(t){if(o._logger.log(a.LogLevel.Trace,"(WebSockets transport) data received. "+h.getDataDetail(t.data,o._logMessageContent)+"."),o.onreceive)try{o.onreceive(t.data)}catch(t){return void o._close(t)}},u.onclose=function(t){if(p)o._close(t);else{var e=null;e="undefined"!=typeof ErrorEvent&&t instanceof ErrorEvent?t.error:"WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",c(new Error(e))}}})));case 9:case"end":return t.stop()}}),t,this)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){u(i,n,o,a,c,"next",t)}function c(t){u(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t,r){return e.apply(this,arguments)}}(),e.send=function(t){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(a.LogLevel.Trace,"(WebSockets transport) sending data. "+h.getDataDetail(t,this._logMessageContent)+"."),this._webSocket.send(t),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")},e.stop=function(){return this._webSocket&&this._close(void 0),Promise.resolve()},e._close=function(t){this._webSocket&&(this._webSocket.onclose=function(){},this._webSocket.onmessage=function(){},this._webSocket.onerror=function(){},this._webSocket.close(),this._webSocket=void 0),this._logger.log(a.LogLevel.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!this._isCloseEvent(t)||!1!==t.wasClean&&1e3===t.code?t instanceof Error?this.onclose(t):this.onclose():this.onclose(new Error("WebSocket closed with status code: "+t.code+" ("+(t.reason||"no reason given")+").")))},e._isCloseEvent=function(t){return t&&"boolean"==typeof t.wasClean&&"number"==typeof t.code},t}();t.WebSocketTransport=f,r.exports,r.exports.__esModule,r.exports.WebSocketTransport}),(function(){return{"./HeaderNames":n,"./ILogger":o,"./ITransport":i,"./Utils":a}}))}}}));

System.register("chunks:///_virtual/XhrHttpClient.js",["./cjs-loader.mjs","./Errors.js","./HttpClient.js","./ILogger.js","./Utils.js"],(function(t,e){"use strict";var r,o,n,s,i;return{setters:[function(t){r=t.default},function(t){o=t.__cjsMetaURL},function(t){n=t.__cjsMetaURL},function(t){s=t.__cjsMetaURL},function(t){i=t.__cjsMetaURL}],execute:function(){function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var a=t("__cjsMetaURL",e.meta.url);r.define(a,(function(t,e,r,o,n){Object.defineProperty(t,"__esModule",{value:!0}),t.XhrHttpClient=void 0;var s=e("./Errors"),i=e("./HttpClient"),a=e("./ILogger"),c=e("./Utils"),p=function(t){var e,r;function o(e){var r;return(r=t.call(this)||this)._logger=e,r}return r=t,(e=o).prototype=Object.create(r.prototype),e.prototype.constructor=e,u(e,r),o.prototype.send=function(t){var e=this;return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new s.AbortError):t.method?t.url?new Promise((function(r,o){var n=new XMLHttpRequest;n.open(t.method,t.url,!0),n.withCredentials=void 0===t.withCredentials||t.withCredentials,n.setRequestHeader("X-Requested-With","XMLHttpRequest"),""===t.content&&(t.content=void 0),t.content&&(c.isArrayBuffer(t.content)?n.setRequestHeader("Content-Type","application/octet-stream"):n.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));var u=t.headers;u&&Object.keys(u).forEach((function(t){n.setRequestHeader(t,u[t])})),t.responseType&&(n.responseType=t.responseType),t.abortSignal&&(t.abortSignal.onabort=function(){n.abort(),o(new s.AbortError)}),t.timeout&&(n.timeout=t.timeout),n.onload=function(){t.abortSignal&&(t.abortSignal.onabort=null),n.status>=200&&n.status<300?r(new i.HttpResponse(n.status,n.statusText,n.response||n.responseText)):o(new s.HttpError(n.response||n.responseText||n.statusText,n.status))},n.onerror=function(){e._logger.log(a.LogLevel.Warning,"Error from HTTP request. "+n.status+": "+n.statusText+"."),o(new s.HttpError(n.statusText,n.status))},n.ontimeout=function(){e._logger.log(a.LogLevel.Warning,"Timeout from HTTP request."),o(new s.TimeoutError)},n.send(t.content)})):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},o}(i.HttpClient);t.XhrHttpClient=p,r.exports,r.exports.__esModule,r.exports.XhrHttpClient}),(function(){return{"./Errors":o,"./HttpClient":n,"./ILogger":s,"./Utils":i}}))}}}));

} }; });